<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta http-equiv="X-UA-Compatible" content="ie=edge"/><title>Print in Order - LeetCode javascript solutions</title><link rel="shortcut icon" href="https://curest0x1021.github.io/Leetcode-Solution/static/img/favicon.png" type="image/png"/><link rel="stylesheet" href="https://curest0x1021.github.io/Leetcode-Solution/static/css/app.css"/></head><body><header><h1>1114. Print in Order</h1><div class="row"><div class="name">Difficulty:</div><div class="value"><a href="https://curest0x1021.github.io/Leetcode-Solution/difficulty/easy" class="tag">Easy</a></div></div><div class="row"><div class="name">Related Topics:</div><div class="value"><ul class="clearfix"><li><a href="https://curest0x1021.github.io/Leetcode-Solution/tag/concurrency">Concurrency</a></li></ul></div></div><div class="row"><div class="name">Similar Questions:</div><div class="value"><ul class="clearfix"><li><a href="https://curest0x1021.github.io/Leetcode-Solution/problem/print-foobar-alternately.html">Print FooBar Alternately</a></li></ul></div></div></header><main><article class="markdown-body"><h2 id="problem">Problem</h2>
<p>Suppose we have a class:</p>
<pre><code class="hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Foo</span> {</span>
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">first</span><span class="hljs-params">()</span> </span>{ <span class="hljs-built_in">print</span>(<span class="hljs-string">"first"</span>); }
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">second</span><span class="hljs-params">()</span> </span>{ <span class="hljs-built_in">print</span>(<span class="hljs-string">"second"</span>); }
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">third</span><span class="hljs-params">()</span> </span>{ <span class="hljs-built_in">print</span>(<span class="hljs-string">"third"</span>); }
}
</code></pre>
<p>The same instance of <code>Foo</code> will be passed to three different threads. Thread A will call <code>first()</code>, thread B will call <code>second()</code>, and thread C will call <code>third()</code>. Design a mechanism and modify the program to ensure that <code>second()</code> is executed after <code>first()</code>, and <code>third()</code> is executed after <code>second()</code>.</p>
<p><strong>Note:</strong></p>
<p>We do not know how the threads will be scheduled in the operating system, even though the numbers in the input seem to imply the ordering. The input format you see is mainly to ensure our tests' comprehensiveness.</p>
<p>&nbsp;
<strong>Example 1:</strong></p>
<pre><code class="hljs">Input: nums = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>]
Output: <span class="hljs-string">"firstsecondthird"</span>
Explanation: There are three threads being fired asynchronously. The input [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>] means thread A calls first(), thread B calls second(), <span class="hljs-keyword">and</span> thread C calls third(). <span class="hljs-string">"firstsecondthird"</span> <span class="hljs-keyword">is</span> the correct output.
</code></pre>
<p><strong>Example 2:</strong></p>
<pre><code class="hljs">Input: nums = [<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">2</span>]
Output: <span class="hljs-string">"firstsecondthird"</span>
Explanation: The input [<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">2</span>] means thread A calls first(), thread B calls third(), <span class="hljs-keyword">and</span> thread C calls second(). <span class="hljs-string">"firstsecondthird"</span> <span class="hljs-keyword">is</span> the correct output.
</code></pre>
<p>&nbsp;
<strong>Constraints:</strong></p>
<ul>
<li><code>nums</code> is a permutation of <code>[1, 2, 3]</code>.</li>
</ul>
<h2 id="solution-java">Solution (Java)</h2>
<pre><code class="hljs lang-java"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Foo</span> </span>{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">volatile</span> <span class="hljs-keyword">boolean</span> firstFinished;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">volatile</span> <span class="hljs-keyword">boolean</span> secondFinished;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">first</span><span class="hljs-params">(Runnable printFirst)</span> </span>{
        <span class="hljs-comment">// printFirst.run() outputs "first". Do not change or remove this line.</span>
        printFirst.run();
        firstFinished = <span class="hljs-keyword">true</span>;
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">second</span><span class="hljs-params">(Runnable printSecond)</span> </span>{
        <span class="hljs-comment">// printSecond.run() outputs "second". Do not change or remove this line.</span>
        <span class="hljs-keyword">while</span> (<span class="hljs-keyword">true</span>) {
            <span class="hljs-keyword">if</span> (firstFinished) {
                printSecond.run();
                secondFinished = <span class="hljs-keyword">true</span>;
                <span class="hljs-keyword">break</span>;
            }
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">third</span><span class="hljs-params">(Runnable printThird)</span> </span>{
        <span class="hljs-comment">// printThird.run() outputs "third". Do not change or remove this line.</span>
        <span class="hljs-keyword">while</span> (<span class="hljs-keyword">true</span>) {
            <span class="hljs-keyword">if</span> (firstFinished &amp;&amp; secondFinished) {
                printThird.run();
                <span class="hljs-keyword">break</span>;
            }
        }
    }
}
</code></pre>
<p><strong>Explain:</strong></p>
<p>nope.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>Time complexity : O(n).</li>
<li>Space complexity : O(n).</li>
</ul></article></main><footer><a href="https://github.com/curest0x1021/Leetcode-Solution" target="_blank"><img src="https://curest0x1021.github.io/Leetcode-Solution/static/img/github.png" alt="github"/></a></footer></body></html>