<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta http-equiv="X-UA-Compatible" content="ie=edge"/><title>Online Stock Span - LeetCode javascript solutions</title><link rel="shortcut icon" href="https://curest0x1021.github.io/Leetcode-Solution/static/img/favicon.png" type="image/png"/><link rel="stylesheet" href="https://curest0x1021.github.io/Leetcode-Solution/static/css/app.css"/></head><body><header><h1>901. Online Stock Span</h1><div class="row"><div class="name">Difficulty:</div><div class="value"><a href="https://curest0x1021.github.io/Leetcode-Solution/difficulty/medium" class="tag">Medium</a></div></div><div class="row"><div class="name">Related Topics:</div><div class="value"><ul class="clearfix"><li><a href="https://curest0x1021.github.io/Leetcode-Solution/tag/stack">Stack</a></li><li><a href="https://curest0x1021.github.io/Leetcode-Solution/tag/design">Design</a></li><li><a href="https://curest0x1021.github.io/Leetcode-Solution/tag/monotonic-stack">Monotonic Stack</a></li><li><a href="https://curest0x1021.github.io/Leetcode-Solution/tag/data-stream">Data Stream</a></li></ul></div></div><div class="row"><div class="name">Similar Questions:</div><div class="value"><ul class="clearfix"><li><a href="https://curest0x1021.github.io/Leetcode-Solution/problem/daily-temperatures.html">Daily Temperatures</a></li></ul></div></div></header><main><article class="markdown-body"><h2 id="problem">Problem</h2>
<p>Design an algorithm that collects daily price quotes for some stock and returns <strong>the span</strong> of that stock's price for the current day.</p>
<p>The <strong>span</strong> of the stock's price today is defined as the maximum number of consecutive days (starting from today and going backward) for which the stock price was less than or equal to today's price.</p>
<ul>
<li>For example, if the price of a stock over the next <code>7</code> days were <code>[100,80,60,70,60,75,85]</code>, then the stock spans would be <code>[1,1,1,2,1,4,6]</code>.</li>
</ul>
<p>Implement the <code>StockSpanner</code> class:</p>
<ul>
<li><p><code>StockSpanner()</code> Initializes the object of the class.</p></li>
<li><p><code>int next(int price)</code> Returns the <strong>span</strong> of the stock's price given that today's price is <code>price</code>.</p></li>
</ul>
<p>&nbsp;
<strong>Example 1:</strong></p>
<pre><code class="hljs">Input
[<span class="hljs-string">"StockSpanner"</span>, <span class="hljs-string">"next"</span>, <span class="hljs-string">"next"</span>, <span class="hljs-string">"next"</span>, <span class="hljs-string">"next"</span>, <span class="hljs-string">"next"</span>, <span class="hljs-string">"next"</span>, <span class="hljs-string">"next"</span>]
[[], [<span class="hljs-number">100</span>], [<span class="hljs-number">80</span>], [<span class="hljs-number">60</span>], [<span class="hljs-number">70</span>], [<span class="hljs-number">60</span>], [<span class="hljs-number">75</span>], [<span class="hljs-number">85</span>]]
Output
[<span class="hljs-literal">null</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>]

Explanation
StockSpanner stockSpanner = new StockSpanner();
stockSpanner.next(<span class="hljs-number">100</span>); <span class="hljs-comment">// return 1</span>
stockSpanner.next(<span class="hljs-number">80</span>);  <span class="hljs-comment">// return 1</span>
stockSpanner.next(<span class="hljs-number">60</span>);  <span class="hljs-comment">// return 1</span>
stockSpanner.next(<span class="hljs-number">70</span>);  <span class="hljs-comment">// return 2</span>
stockSpanner.next(<span class="hljs-number">60</span>);  <span class="hljs-comment">// return 1</span>
stockSpanner.next(<span class="hljs-number">75</span>);  <span class="hljs-comment">// return 4, because the last 4 prices (including today's price of 75) were less than or equal to today's price.</span>
stockSpanner.next(<span class="hljs-number">85</span>);  <span class="hljs-comment">// return 6</span>
</code></pre>
<p>&nbsp;
<strong>Constraints:</strong></p>
<ul>
<li><p><code>1 &lt;= price &lt;= 105</code></p></li>
<li><p>At most <code>104</code> calls will be made to <code>next</code>.</p></li>
</ul>
<h2 id="solution-java">Solution (Java)</h2>
<pre><code class="hljs lang-java"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">StockSpanner</span> </span>{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map&lt;Integer, Integer&gt; map;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Deque&lt;Integer&gt; stocks;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> index;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">StockSpanner</span><span class="hljs-params">()</span> </span>{
        stocks = <span class="hljs-keyword">new</span> LinkedList&lt;&gt;();
        index = -<span class="hljs-number">1</span>;
        map = <span class="hljs-keyword">new</span> HashMap&lt;&gt;();
        stocks.push(-<span class="hljs-number">1</span>);
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">next</span><span class="hljs-params">(<span class="hljs-keyword">int</span> price)</span> </span>{
        <span class="hljs-keyword">if</span> (index != -<span class="hljs-number">1</span>) {
            stocks.push(index);
        }
        map.put(++index, price);
        <span class="hljs-keyword">if</span> (stocks.size() == <span class="hljs-number">1</span>) {
            <span class="hljs-keyword">return</span> (index - stocks.peek());
        }
        <span class="hljs-keyword">while</span> (stocks.size() &gt; <span class="hljs-number">1</span> &amp;&amp; map.get(stocks.peek()) &lt;= price) {
            stocks.pop();
        }
        <span class="hljs-keyword">return</span> (index - stocks.peek());
    }
}

<span class="hljs-comment">/**
 * Your StockSpanner object will be instantiated and called as such:
 * StockSpanner obj = new StockSpanner();
 * int param_1 = obj.next(price);
 */</span>
</code></pre>
<p><strong>Explain:</strong></p>
<p>nope.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>Time complexity : O(n).</li>
<li>Space complexity : O(n).</li>
</ul></article></main><footer><a href="https://github.com/curest0x1021/Leetcode-Solution" target="_blank"><img src="https://curest0x1021.github.io/Leetcode-Solution/static/img/github.png" alt="github"/></a></footer></body></html>