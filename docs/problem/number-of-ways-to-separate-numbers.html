<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta http-equiv="X-UA-Compatible" content="ie=edge"/><title>Number of Ways to Separate Numbers - LeetCode javascript solutions</title><link rel="shortcut icon" href="https://curest0x1021.github.io/Leetcode-Solution/static/img/favicon.png" type="image/png"/><link rel="stylesheet" href="https://curest0x1021.github.io/Leetcode-Solution/static/css/app.css"/></head><body><header><h1>1977. Number of Ways to Separate Numbers</h1><div class="row"><div class="name">Difficulty:</div><div class="value"><a href="https://curest0x1021.github.io/Leetcode-Solution/difficulty/hard" class="tag">Hard</a></div></div><div class="row"><div class="name">Related Topics:</div><div class="value"><ul class="clearfix"><li><a href="https://curest0x1021.github.io/Leetcode-Solution/tag/string">String</a></li><li><a href="https://curest0x1021.github.io/Leetcode-Solution/tag/dynamic-programming">Dynamic Programming</a></li><li><a href="https://curest0x1021.github.io/Leetcode-Solution/tag/suffix-array">Suffix Array</a></li></ul></div></div><div class="row"><div class="name">Similar Questions:</div><div class="value"><ul class="clearfix"><li><a href="https://curest0x1021.github.io/Leetcode-Solution/problem/decode-ways.html">Decode Ways</a></li><li><a href="https://curest0x1021.github.io/Leetcode-Solution/problem/decode-ways-ii.html">Decode Ways II</a></li><li><a href="https://curest0x1021.github.io/Leetcode-Solution/problem/restore-the-array.html">Restore The Array</a></li></ul></div></div></header><main><article class="markdown-body"><h2 id="problem">Problem</h2>
<p>You wrote down many <strong>positive</strong> integers in a string called <code>num</code>. However, you realized that you forgot to add commas to seperate the different numbers. You remember that the list of integers was <strong>non-decreasing</strong> and that <strong>no</strong> integer had leading zeros.</p>
<p>Return **the *<em>number of possible lists of integers</em>* that you could have written down to get the string **<code>num</code>. Since the answer may be large, return it *<em>modulo</em>* <code>109 + 7</code>.</p>
<p>&nbsp;
<strong>Example 1:</strong></p>
<pre><code class="hljs"><span class="hljs-attr">Input:</span> <span class="hljs-string">num</span> <span class="hljs-string">=</span> <span class="hljs-string">"327"</span>
<span class="hljs-attr">Output:</span> <span class="hljs-number">2</span>
<span class="hljs-attr">Explanation: You could have written down the numbers:</span>
<span class="hljs-number">3</span><span class="hljs-string">,</span> <span class="hljs-number">27</span>
<span class="hljs-number">327</span>
</code></pre>
<p><strong>Example 2:</strong></p>
<pre><code class="hljs"><span class="hljs-attr">Input:</span> <span class="hljs-string">num</span> <span class="hljs-string">=</span> <span class="hljs-string">"094"</span>
<span class="hljs-attr">Output:</span> <span class="hljs-number">0</span>
<span class="hljs-attr">Explanation:</span> <span class="hljs-literal">No</span> <span class="hljs-string">numbers</span> <span class="hljs-string">can</span> <span class="hljs-string">have</span> <span class="hljs-string">leading</span> <span class="hljs-string">zeros</span> <span class="hljs-string">and</span> <span class="hljs-string">all</span> <span class="hljs-string">numbers</span> <span class="hljs-string">must</span> <span class="hljs-string">be</span> <span class="hljs-string">positive.</span>
</code></pre>
<p><strong>Example 3:</strong></p>
<pre><code class="hljs"><span class="hljs-attr">Input:</span> <span class="hljs-string">num</span> <span class="hljs-string">=</span> <span class="hljs-string">"0"</span>
<span class="hljs-attr">Output:</span> <span class="hljs-number">0</span>
<span class="hljs-attr">Explanation:</span> <span class="hljs-literal">No</span> <span class="hljs-string">numbers</span> <span class="hljs-string">can</span> <span class="hljs-string">have</span> <span class="hljs-string">leading</span> <span class="hljs-string">zeros</span> <span class="hljs-string">and</span> <span class="hljs-string">all</span> <span class="hljs-string">numbers</span> <span class="hljs-string">must</span> <span class="hljs-string">be</span> <span class="hljs-string">positive.</span>
</code></pre>
<p>&nbsp;
<strong>Constraints:</strong></p>
<ul>
<li><p><code>1 &lt;= num.length &lt;= 3500</code></p></li>
<li><p><code>num</code> consists of digits <code>'0'</code> through <code>'9'</code>.</p></li>
</ul>
<h2 id="solution">Solution</h2>
<pre><code class="hljs lang-java"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span> </span>{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span>[][] lcp;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">long</span>[][] dp;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">long</span>[][] dps;
    <span class="hljs-keyword">private</span> String num;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> n;

    <span class="hljs-comment">// Pre-compute The Longest Common Prefix sequence for each index in the string</span>
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">calcLCP</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = n - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) {
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = n - <span class="hljs-number">1</span>; j &gt;= <span class="hljs-number">0</span>; j--) {
                <span class="hljs-keyword">if</span> (num.charAt(i) == num.charAt(j)) {
                    lcp[i][j] = lcp[i + <span class="hljs-number">1</span>][j + <span class="hljs-number">1</span>] + <span class="hljs-number">1</span>;
                }
            }
        }
    }

    <span class="hljs-comment">// compare substring of same length for value</span>
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">compare</span><span class="hljs-params">(<span class="hljs-keyword">int</span> i, <span class="hljs-keyword">int</span> j, <span class="hljs-keyword">int</span> len)</span> </span>{
        <span class="hljs-keyword">int</span> common = lcp[i][j];
        <span class="hljs-keyword">return</span> common &gt;= len || num.charAt(i + common) &lt; num.charAt(j + common);
    }

    <span class="hljs-comment">// calculates number of possible separations</span>
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">calcResult</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = n - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) {
            <span class="hljs-comment">// leading zero at current current index</span>
            <span class="hljs-keyword">if</span> (num.charAt(i) == <span class="hljs-string">'0'</span>) {
                <span class="hljs-keyword">continue</span>;
            }
            <span class="hljs-comment">// for substring starting at index i</span>
            <span class="hljs-keyword">long</span> sum = <span class="hljs-number">0</span>;
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = n - <span class="hljs-number">1</span>; j &gt;= i; j--) {
                <span class="hljs-keyword">long</span> mod = <span class="hljs-number">1000000007</span>;
                <span class="hljs-keyword">if</span> (j == n - <span class="hljs-number">1</span>) {
                    <span class="hljs-comment">// whole substring from index i is a valid possible list of integer (single</span>
                    <span class="hljs-comment">// integer in this case)</span>
                    dp[i][j] = <span class="hljs-number">1</span>;
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-comment">// first integer (i-j)</span>
                    <span class="hljs-keyword">int</span> len = j - i + <span class="hljs-number">1</span>;
                    <span class="hljs-comment">// second integer start index</span>
                    <span class="hljs-keyword">int</span> st = j + <span class="hljs-number">1</span>;
                    <span class="hljs-comment">// second integer end index</span>
                    <span class="hljs-keyword">int</span> ed = st + len - <span class="hljs-number">1</span>;
                    <span class="hljs-comment">// equal length integers should be compared for value</span>
                    dp[i][j] = <span class="hljs-number">0</span>;
                    <span class="hljs-keyword">if</span> (ed &lt; n &amp;&amp; compare(i, st, len)) {
                        dp[i][j] = dp[st][ed];
                    }
                    <span class="hljs-comment">// including the second integers possibilities with length greater than 1st one.</span>
                    <span class="hljs-keyword">if</span> (ed + <span class="hljs-number">1</span> &lt; n) {
                        <span class="hljs-comment">// dps[st][ed+1] =&gt; dp[st][ed+1].......dp[st][n-1]</span>
                        dp[i][j] = (dp[i][j] + dps[st][ed + <span class="hljs-number">1</span>]) % mod;
                    }
                }
                dps[i][j] = sum = (sum + dp[i][j]) % mod;
            }
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">numberOfCombinations</span><span class="hljs-params">(String num)</span> </span>{
        <span class="hljs-keyword">if</span> (num.charAt(<span class="hljs-number">0</span>) == <span class="hljs-string">'0'</span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
        }
        n = num.length();
        <span class="hljs-keyword">this</span>.num = num;
        lcp = <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[n + <span class="hljs-number">1</span>][n + <span class="hljs-number">1</span>];
        dp = <span class="hljs-keyword">new</span> <span class="hljs-keyword">long</span>[n + <span class="hljs-number">1</span>][n + <span class="hljs-number">1</span>];
        dps = <span class="hljs-keyword">new</span> <span class="hljs-keyword">long</span>[n + <span class="hljs-number">1</span>][n + <span class="hljs-number">1</span>];
        calcLCP();
        calcResult();
        <span class="hljs-keyword">return</span> (<span class="hljs-keyword">int</span>) dps[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>];
    }
}
</code></pre>
<p><strong>Explain:</strong></p>
<p>nope.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>Time complexity : O(n).</li>
<li>Space complexity : O(n).</li>
</ul></article></main><footer><a href="https://github.com/curest0x1021/Leetcode-Solution" target="_blank"><img src="https://curest0x1021.github.io/Leetcode-Solution/static/img/github.png" alt="github"/></a></footer></body></html>