<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta http-equiv="X-UA-Compatible" content="ie=edge"/><title>Sliding Puzzle - LeetCode javascript solutions</title><link rel="shortcut icon" href="https://curest0x1021.github.io/Leetcode-Solution/static/img/favicon.png" type="image/png"/><link rel="stylesheet" href="https://curest0x1021.github.io/Leetcode-Solution/static/css/app.css"/></head><body><header><h1>773. Sliding Puzzle</h1><div class="row"><div class="name">Difficulty:</div><div class="value"><a href="https://curest0x1021.github.io/Leetcode-Solution/difficulty/hard" class="tag">Hard</a></div></div><div class="row"><div class="name">Related Topics:</div><div class="value"><ul class="clearfix"><li><a href="https://curest0x1021.github.io/Leetcode-Solution/tag/array">Array</a></li><li><a href="https://curest0x1021.github.io/Leetcode-Solution/tag/breadth-first-search">Breadth-First Search</a></li><li><a href="https://curest0x1021.github.io/Leetcode-Solution/tag/matrix">Matrix</a></li></ul></div></div><div class="row"><div class="name">Similar Questions:</div><div class="value"><ul class="clearfix"></ul></div></div></header><main><article class="markdown-body"><h2 id="problem">Problem</h2>
<p>On an <code>2 x 3</code> board, there are five tiles labeled from <code>1</code> to <code>5</code>, and an empty square represented by <code>0</code>. A <strong>move</strong> consists of choosing <code>0</code> and a 4-directionally adjacent number and swapping it.</p>
<p>The state of the board is solved if and only if the board is <code>[[1,2,3],[4,5,0]]</code>.</p>
<p>Given the puzzle board <code>board</code>, return <strong>the least number of moves required so that the state of the board is solved</strong>. If it is impossible for the state of the board to be solved, return <code>-1</code>.</p>
<p>&nbsp;
<strong>Example 1:</strong></p>
<p><img src="https://assets.leetcode.com/uploads/2021/06/29/slide1-grid.jpg" alt="" /></p>
<pre><code class="hljs">Input: board = [[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>],[<span class="hljs-number">4</span>,<span class="hljs-number">0</span>,<span class="hljs-number">5</span>]]
Output: <span class="hljs-number">1</span>
Explanation: Swap the <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> the <span class="hljs-number">5</span> <span class="hljs-keyword">in</span> one move.
</code></pre>
<p><strong>Example 2:</strong></p>
<p><img src="https://assets.leetcode.com/uploads/2021/06/29/slide2-grid.jpg" alt="" /></p>
<pre><code class="hljs">Input: board = [[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>],[<span class="hljs-number">5</span>,<span class="hljs-number">4</span>,<span class="hljs-number">0</span>]]
Output: <span class="hljs-number">-1</span>
Explanation: No number of moves will make the board solved.
</code></pre>
<p><strong>Example 3:</strong></p>
<p><img src="https://assets.leetcode.com/uploads/2021/06/29/slide3-grid.jpg" alt="" /></p>
<pre><code class="hljs">Input: board = [[<span class="hljs-number">4</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>],[<span class="hljs-number">5</span>,<span class="hljs-number">0</span>,<span class="hljs-number">3</span>]]
Output: <span class="hljs-number">5</span>
Explanation: <span class="hljs-number">5</span> <span class="hljs-keyword">is</span> the smallest number of moves that solves the board.
An example path:
After move <span class="hljs-number">0</span>: [[<span class="hljs-number">4</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>],[<span class="hljs-number">5</span>,<span class="hljs-number">0</span>,<span class="hljs-number">3</span>]]
After move <span class="hljs-number">1</span>: [[<span class="hljs-number">4</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>],[<span class="hljs-number">0</span>,<span class="hljs-number">5</span>,<span class="hljs-number">3</span>]]
After move <span class="hljs-number">2</span>: [[<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>],[<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">3</span>]]
After move <span class="hljs-number">3</span>: [[<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">2</span>],[<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">3</span>]]
After move <span class="hljs-number">4</span>: [[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">0</span>],[<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">3</span>]]
After move <span class="hljs-number">5</span>: [[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>],[<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">0</span>]]
</code></pre>
<p>&nbsp;
<strong>Constraints:</strong></p>
<ul>
<li><p><code>board.length == 2</code></p></li>
<li><p><code>board[i].length == 3</code></p></li>
<li><p><code>0 &lt;= board[i][j] &lt;= 5</code></p></li>
<li><p>Each value <code>board[i][j]</code> is <strong>unique</strong>.</p></li>
</ul>
<h2 id="solution-java">Solution (Java)</h2>
<pre><code class="hljs lang-java"><span class="hljs-keyword">import</span> java.util.HashSet;
<span class="hljs-keyword">import</span> java.util.LinkedList;
<span class="hljs-keyword">import</span> java.util.Queue;
<span class="hljs-keyword">import</span> java.util.Set;

<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span> </span>{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Node</span> </span>{
        <span class="hljs-keyword">public</span> String board;
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> depth;
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> y;
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> x;

        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Node</span><span class="hljs-params">(String board, <span class="hljs-keyword">int</span> depth, <span class="hljs-keyword">int</span> y, <span class="hljs-keyword">int</span> x)</span> </span>{
            <span class="hljs-keyword">this</span>.board = board;
            <span class="hljs-keyword">this</span>.depth = depth;
            <span class="hljs-keyword">this</span>.y = y;
            <span class="hljs-keyword">this</span>.x = x;
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">slidingPuzzle</span><span class="hljs-params">(<span class="hljs-keyword">int</span>[][] board)</span> </span>{
        String targetStr = <span class="hljs-string">"123450"</span>;
        StringBuilder sb = <span class="hljs-keyword">new</span> StringBuilder();
        <span class="hljs-keyword">int</span> y = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">int</span> x = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; board.length; i++) {
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; board[<span class="hljs-number">0</span>].length; j++) {
                <span class="hljs-keyword">if</span> (board[i][j] == <span class="hljs-number">0</span>) {
                    y = i;
                    x = j;
                }
                sb.append(board[i][j]);
            }
        }
        Set&lt;String&gt; seen = <span class="hljs-keyword">new</span> HashSet&lt;&gt;();
        Queue&lt;Node&gt; q = <span class="hljs-keyword">new</span> LinkedList&lt;&gt;();
        q.add(<span class="hljs-keyword">new</span> Node(sb.toString(), <span class="hljs-number">0</span>, y, x));
        <span class="hljs-keyword">int</span>[][] dir = {{<span class="hljs-number">1</span>, <span class="hljs-number">0</span>}, {-<span class="hljs-number">1</span>, <span class="hljs-number">0</span>}, {<span class="hljs-number">0</span>, <span class="hljs-number">1</span>}, {<span class="hljs-number">0</span>, -<span class="hljs-number">1</span>}};
        <span class="hljs-keyword">while</span> (!q.isEmpty()) {
            Node next = q.poll();
            String s = next.board;
            <span class="hljs-keyword">if</span> (!seen.contains(s)) {
                <span class="hljs-keyword">if</span> (s.equals(targetStr)) {
                    <span class="hljs-keyword">return</span> next.depth;
                }
                <span class="hljs-keyword">int</span> nextDepth = next.depth + <span class="hljs-number">1</span>;
                y = next.y;
                x = next.x;
                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span>[] vector : dir) {
                    <span class="hljs-keyword">int</span> nextY = y + vector[<span class="hljs-number">0</span>];
                    <span class="hljs-keyword">int</span> nextX = x + vector[<span class="hljs-number">1</span>];
                    <span class="hljs-keyword">if</span> (<span class="hljs-number">0</span> &lt;= nextY
                            &amp;&amp; nextY &lt; board.length
                            &amp;&amp; <span class="hljs-number">0</span> &lt;= nextX
                            &amp;&amp; nextX &lt; board[<span class="hljs-number">0</span>].length) {
                        String newBoard = swap(s, y, x, nextY, nextX);
                        q.add(<span class="hljs-keyword">new</span> Node(newBoard, nextDepth, nextY, nextX));
                    }
                }
                seen.add(s);
            }
        }
        <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">swap</span><span class="hljs-params">(String board, <span class="hljs-keyword">int</span> y1, <span class="hljs-keyword">int</span> x1, <span class="hljs-keyword">int</span> y2, <span class="hljs-keyword">int</span> x2)</span> </span>{
        <span class="hljs-keyword">char</span>[] arr = board.toCharArray();
        <span class="hljs-keyword">char</span> t = board.charAt(y1 * <span class="hljs-number">3</span> + x1);
        arr[y1 * <span class="hljs-number">3</span> + x1] = board.charAt(y2 * <span class="hljs-number">3</span> + x2);
        arr[y2 * <span class="hljs-number">3</span> + x2] = t;
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> String(arr);
    }
}
</code></pre>
<h2 id="solution-c">Solution (C++)</h2>
<pre><code class="hljs lang-cpp"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span> {</span>
<span class="hljs-keyword">public</span>:
  <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">slidingPuzzle</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&gt;&amp; board)</span> </span>{
    <span class="hljs-keyword">constexpr</span> <span class="hljs-keyword">int</span> kRows = <span class="hljs-number">2</span>;
    <span class="hljs-keyword">constexpr</span> <span class="hljs-keyword">int</span> kCols = <span class="hljs-number">3</span>; 
    <span class="hljs-built_in">string</span> goal;
    <span class="hljs-built_in">string</span> start;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; board.size(); ++i)
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; board[<span class="hljs-number">0</span>].size(); ++j) {
        start += (board[i][j] + <span class="hljs-string">'0'</span>);
        goal += (i * kCols + j + <span class="hljs-number">1</span>) % (kRows * kCols) + <span class="hljs-string">'0'</span>; <span class="hljs-comment">// 12345...0</span>
    }

    <span class="hljs-keyword">if</span> (start == goal) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;

    <span class="hljs-keyword">constexpr</span> <span class="hljs-keyword">int</span> dirs[<span class="hljs-number">4</span>][<span class="hljs-number">2</span>] = {{<span class="hljs-number">-1</span>, <span class="hljs-number">0</span>}, {<span class="hljs-number">1</span>, <span class="hljs-number">0</span>}, {<span class="hljs-number">0</span>, <span class="hljs-number">1</span>}, {<span class="hljs-number">0</span>, <span class="hljs-number">-1</span>}};

    <span class="hljs-built_in">set</span>&lt;<span class="hljs-built_in">string</span>&gt; visited{start};
    <span class="hljs-keyword">int</span> steps = <span class="hljs-number">0</span>;
    <span class="hljs-built_in">queue</span>&lt;<span class="hljs-built_in">string</span>&gt; q;
    q.push(start);
    <span class="hljs-keyword">while</span> (!q.empty()) {
      ++steps;
      <span class="hljs-keyword">int</span> size = q.size();
      <span class="hljs-keyword">while</span> (size-- &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-built_in">string</span> s = q.front();
        q.pop();
        <span class="hljs-keyword">int</span> p = s.find(<span class="hljs-string">'0'</span>);
        <span class="hljs-keyword">int</span> y = p / kCols;
        <span class="hljs-keyword">int</span> x = p % kCols;        
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">4</span>; ++i) {
          <span class="hljs-keyword">int</span> tx = x + dirs[i][<span class="hljs-number">0</span>];
          <span class="hljs-keyword">int</span> ty = y + dirs[i][<span class="hljs-number">1</span>];
          <span class="hljs-keyword">if</span> (tx &lt; <span class="hljs-number">0</span> || ty &lt; <span class="hljs-number">0</span> || tx &gt;= kCols || ty &gt;= kRows) <span class="hljs-keyword">continue</span>;
          <span class="hljs-keyword">int</span> pp = ty * kCols + tx;
          <span class="hljs-function"><span class="hljs-built_in">string</span> <span class="hljs-title">t</span><span class="hljs-params">(s)</span></span>;
          swap(t[p], t[pp]);          
          <span class="hljs-keyword">if</span> (visited.count(t)) <span class="hljs-keyword">continue</span>;            
          <span class="hljs-keyword">if</span> (t == goal) <span class="hljs-keyword">return</span> steps;
          visited.insert(t);
          q.push(t);
        }
      }      
    }
    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;
  }
};
</code></pre>
<p><strong>Explain:</strong></p>
<p>nope.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>Time complexity : O(n).</li>
<li>Space complexity : O(n).</li>
</ul></article></main><footer><a href="https://github.com/curest0x1021/Leetcode-Solution" target="_blank"><img src="https://curest0x1021.github.io/Leetcode-Solution/static/img/github.png" alt="github"/></a></footer></body></html>