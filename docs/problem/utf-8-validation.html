<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta http-equiv="X-UA-Compatible" content="ie=edge"/><title>UTF-8 Validation - LeetCode javascript solutions</title><link rel="shortcut icon" href="https://curest0x1021.github.io/Leetcode-Solution/static/img/favicon.png" type="image/png"/><link rel="stylesheet" href="https://curest0x1021.github.io/Leetcode-Solution/static/css/app.css"/></head><body><header><h1>393. UTF-8 Validation</h1><div class="row"><div class="name">Difficulty:</div><div class="value"><a href="https://curest0x1021.github.io/Leetcode-Solution/difficulty/medium" class="tag">Medium</a></div></div><div class="row"><div class="name">Related Topics:</div><div class="value"><ul class="clearfix"><li><a href="https://curest0x1021.github.io/Leetcode-Solution/tag/array">Array</a></li><li><a href="https://curest0x1021.github.io/Leetcode-Solution/tag/bit-manipulation">Bit Manipulation</a></li></ul></div></div><div class="row"><div class="name">Similar Questions:</div><div class="value"><ul class="clearfix"></ul></div></div></header><main><article class="markdown-body"><h2 id="problem">Problem</h2>
<p>Given an integer array <code>data</code> representing the data, return whether it is a valid <strong>UTF-8</strong> encoding (i.e. it translates to a sequence of valid UTF-8 encoded characters).</p>
<p>A character in <strong>UTF8</strong> can be from <strong>1 to 4 bytes</strong> long, subjected to the following rules:</p>
<ul>
<li><p>For a <strong>1-byte</strong> character, the first bit is a <code>0</code>, followed by its Unicode code.</p></li>
<li><p>For an <strong>n-bytes</strong> character, the first <code>n</code> bits are all one's, the <code>n + 1</code> bit is <code>0</code>, followed by <code>n - 1</code> bytes with the most significant <code>2</code> bits being <code>10</code>.</p></li>
</ul>
<p>This is how the UTF-8 encoding would work:</p>
<pre><code class="hljs">Number of Bytes   |        UTF<span class="hljs-number">-8</span> Octet Sequence
                       |              (binary)
   --------------------+-----------------------------------------
            <span class="hljs-number">1</span>          |   <span class="hljs-number">0</span>xxxxxxx
            <span class="hljs-number">2</span>          |   <span class="hljs-number">110</span>xxxxx <span class="hljs-number">10</span>xxxxxx
            <span class="hljs-number">3</span>          |   <span class="hljs-number">1110</span>xxxx <span class="hljs-number">10</span>xxxxxx <span class="hljs-number">10</span>xxxxxx
            <span class="hljs-number">4</span>          |   <span class="hljs-number">11110</span>xxx <span class="hljs-number">10</span>xxxxxx <span class="hljs-number">10</span>xxxxxx <span class="hljs-number">10</span>xxxxxx
</code></pre>
<p><code>x</code> denotes a bit in the binary form of a byte that may be either <code>0</code> or <code>1</code>.</p>
<p>**Note: **The input is an array of integers. Only the <strong>least significant 8 bits</strong> of each integer is used to store the data. This means each integer represents only 1 byte of data.</p>
<p>&nbsp;
<strong>Example 1:</strong></p>
<pre><code class="hljs">Input: data = [<span class="hljs-number">197</span>,<span class="hljs-number">130</span>,<span class="hljs-number">1</span>]
Output: <span class="hljs-literal">true</span>
Explanation: data represents the octet sequence: <span class="hljs-number">11000101</span> <span class="hljs-number">10000010</span> <span class="hljs-number">00000001.</span>
It <span class="hljs-keyword">is</span> a valid utf<span class="hljs-number">-8</span> encoding <span class="hljs-keyword">for</span> a <span class="hljs-number">2</span>-bytes character followed by a <span class="hljs-number">1</span>-byte character.
</code></pre>
<p><strong>Example 2:</strong></p>
<pre><code class="hljs"><span class="hljs-keyword">Input</span>: data = [<span class="hljs-number">235</span>,<span class="hljs-number">140</span>,<span class="hljs-number">4</span>]
Output: <span class="hljs-keyword">false</span>
Explanation: data represented the octet <span class="hljs-keyword">sequence</span>: <span class="hljs-number">11101011</span> <span class="hljs-number">10001100</span> <span class="hljs-number">00000100.</span>
The first <span class="hljs-number">3</span> bits are <span class="hljs-keyword">all</span> <span class="hljs-keyword">on</span><span class="hljs-string">e's and the 4th bit is 0 means it is a 3-bytes character.
The next byte is a continuation byte which starts with 10 and that'</span>s correct.
But the second continuation byte does <span class="hljs-keyword">not</span> <span class="hljs-keyword">start</span> <span class="hljs-keyword">with</span> <span class="hljs-number">10</span>, so it <span class="hljs-keyword">is</span> invalid.
</code></pre>
<p>&nbsp;
<strong>Constraints:</strong></p>
<ul>
<li><p><code>1 &lt;= data.length &lt;= 2 * 104</code></p></li>
<li><p><code>0 &lt;= data[i] &lt;= 255</code></p></li>
</ul>
<h2 id="solution">Solution</h2>
<pre><code class="hljs lang-java"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">validUtf8</span><span class="hljs-params">(<span class="hljs-keyword">int</span>[] data)</span> </span>{
        <span class="hljs-keyword">int</span> count = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> d : data) {
            <span class="hljs-keyword">if</span> (count == <span class="hljs-number">0</span>) {
                <span class="hljs-keyword">if</span> (d &gt;&gt; <span class="hljs-number">5</span> == <span class="hljs-number">0b110</span>) {
                    count = <span class="hljs-number">1</span>;
                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (d &gt;&gt; <span class="hljs-number">4</span> == <span class="hljs-number">0b1110</span>) {
                    count = <span class="hljs-number">2</span>;
                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (d &gt;&gt; <span class="hljs-number">3</span> == <span class="hljs-number">0b11110</span>) {
                    count = <span class="hljs-number">3</span>;
                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (d &gt;&gt; <span class="hljs-number">7</span> == <span class="hljs-number">1</span>) {
                    <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
                }
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">if</span> (d &gt;&gt; <span class="hljs-number">6</span> != <span class="hljs-number">0b10</span>) {
                    <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
                } <span class="hljs-keyword">else</span> {
                    count--;
                }
            }
        }
        <span class="hljs-keyword">return</span> count == <span class="hljs-number">0</span>;
    }
}
</code></pre>
<p><strong>Explain:</strong></p>
<p>nope.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>Time complexity : O(n).</li>
<li>Space complexity : O(n).</li>
</ul></article></main><footer><a href="https://github.com/curest0x1021/Leetcode-Solution" target="_blank"><img src="https://curest0x1021.github.io/Leetcode-Solution/static/img/github.png" alt="github"/></a></footer></body></html>