<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta http-equiv="X-UA-Compatible" content="ie=edge"/><title>Cracking the Safe - LeetCode javascript solutions</title><link rel="shortcut icon" href="https://curest0x1021.github.io/Leetcode-Solution/static/img/favicon.png" type="image/png"/><link rel="stylesheet" href="https://curest0x1021.github.io/Leetcode-Solution/static/css/app.css"/></head><body><header><h1>753. Cracking the Safe</h1><div class="row"><div class="name">Difficulty:</div><div class="value"><a href="https://curest0x1021.github.io/Leetcode-Solution/difficulty/hard" class="tag">Hard</a></div></div><div class="row"><div class="name">Related Topics:</div><div class="value"><ul class="clearfix"><li><a href="https://curest0x1021.github.io/Leetcode-Solution/tag/depth-first-search">Depth-First Search</a></li><li><a href="https://curest0x1021.github.io/Leetcode-Solution/tag/graph">Graph</a></li><li><a href="https://curest0x1021.github.io/Leetcode-Solution/tag/eulerian-circuit">Eulerian Circuit</a></li></ul></div></div><div class="row"><div class="name">Similar Questions:</div><div class="value"><ul class="clearfix"></ul></div></div></header><main><article class="markdown-body"><h2 id="problem">Problem</h2>
<p>There is a safe protected by a password. The password is a sequence of <code>n</code> digits where each digit can be in the range <code>[0, k - 1]</code>.</p>
<p>The safe has a peculiar way of checking the password. When you enter in a sequence, it checks the **most recent *<em><code>n</code></em>* digits** that were entered each time you type a digit.</p>
<pre><code>For example, the correct password is <code>"345"</code> and you enter in <code>"012345"</code>:
</code></pre>
<ul>
<li><p>After typing <code>0</code>, the most recent <code>3</code> digits is <code>"0"</code>, which is incorrect.</p></li>
<li><p>After typing <code>1</code>, the most recent <code>3</code> digits is <code>"01"</code>, which is incorrect.</p></li>
<li><p>After typing <code>2</code>, the most recent <code>3</code> digits is <code>"012"</code>, which is incorrect.</p></li>
<li><p>After typing <code>3</code>, the most recent <code>3</code> digits is <code>"123"</code>, which is incorrect.</p></li>
<li><p>After typing <code>4</code>, the most recent <code>3</code> digits is <code>"234"</code>, which is incorrect.</p></li>
<li><p>After typing <code>5</code>, the most recent <code>3</code> digits is <code>"345"</code>, which is correct and the safe unlocks.</p></li>
</ul>
<p>Return **any string of *<em>minimum length</em>* that will unlock the safe <strong>at some point</strong> of entering it**.</p>
<p>&nbsp;
<strong>Example 1:</strong></p>
<pre><code class="hljs"><span class="hljs-keyword">Input</span>: n = <span class="hljs-number">1</span>, k = <span class="hljs-number">2</span>
Output: "10"
Explanation: The <span class="hljs-keyword">password</span> <span class="hljs-keyword">is</span> a single digit, so enter <span class="hljs-keyword">each</span> digit. "01" would <span class="hljs-keyword">also</span> unlock the safe.
</code></pre>
<p><strong>Example 2:</strong></p>
<pre><code class="hljs">Input: n = <span class="hljs-number">2</span>, k = <span class="hljs-number">2</span>
Output: <span class="hljs-string">"01100"</span>
Explanation: For <span class="hljs-keyword">each</span> possible password:
- <span class="hljs-string">"00"</span> is typed <span class="hljs-keyword">in</span> starting <span class="hljs-built_in">from</span> <span class="hljs-keyword">the</span> <span class="hljs-number">4</span>th digit.
- <span class="hljs-string">"01"</span> is typed <span class="hljs-keyword">in</span> starting <span class="hljs-built_in">from</span> <span class="hljs-keyword">the</span> <span class="hljs-number">1</span>st digit.
- <span class="hljs-string">"10"</span> is typed <span class="hljs-keyword">in</span> starting <span class="hljs-built_in">from</span> <span class="hljs-keyword">the</span> <span class="hljs-number">3</span>rd digit.
- <span class="hljs-string">"11"</span> is typed <span class="hljs-keyword">in</span> starting <span class="hljs-built_in">from</span> <span class="hljs-keyword">the</span> <span class="hljs-number">2</span>nd digit.
Thus <span class="hljs-string">"01100"</span> will unlock <span class="hljs-keyword">the</span> safe. <span class="hljs-string">"01100"</span>, <span class="hljs-string">"10011"</span>, <span class="hljs-keyword">and</span> <span class="hljs-string">"11001"</span> would also unlock <span class="hljs-keyword">the</span> safe.
</code></pre>
<p>&nbsp;
<strong>Constraints:</strong></p>
<ul>
<li><p><code>1 &lt;= n &lt;= 4</code></p></li>
<li><p><code>1 &lt;= k &lt;= 10</code></p></li>
<li><p><code>1 &lt;= kn &lt;= 4096</code></p></li>
</ul>
<h2 id="solution-java">Solution (Java)</h2>
<pre><code class="hljs lang-java"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span> </span>{
    <span class="hljs-keyword">private</span> String foundStr;

    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">crackSafe</span><span class="hljs-params">(<span class="hljs-keyword">int</span> n, <span class="hljs-keyword">int</span> k)</span> </span>{
        <span class="hljs-keyword">int</span> targetCnt = (<span class="hljs-keyword">int</span>) Math.pow(k, n);
        <span class="hljs-keyword">boolean</span>[] visited = <span class="hljs-keyword">new</span> <span class="hljs-keyword">boolean</span>[(<span class="hljs-keyword">int</span>) Math.pow(<span class="hljs-number">10</span>, n)];
        visited[<span class="hljs-number">0</span>] = <span class="hljs-keyword">true</span>;
        <span class="hljs-keyword">int</span> visitedCnt = <span class="hljs-number">1</span>;
        StringBuilder crackStr = <span class="hljs-keyword">new</span> StringBuilder();
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) {
            crackStr.append(<span class="hljs-string">'0'</span>);
        }
        dfsAddPwd(n, k, crackStr, <span class="hljs-number">0</span>, visited, visitedCnt, targetCnt);
        <span class="hljs-keyword">return</span> foundStr;
    }

    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">dfsAddPwd</span><span class="hljs-params">(
            <span class="hljs-keyword">int</span> n,
            <span class="hljs-keyword">int</span> k,
            StringBuilder crackStr,
            <span class="hljs-keyword">int</span> prev,
            <span class="hljs-keyword">boolean</span>[] visited,
            <span class="hljs-keyword">int</span> visitedCnt,
            <span class="hljs-keyword">int</span> targetCnt)</span> </span>{
        <span class="hljs-keyword">if</span> (foundStr != <span class="hljs-keyword">null</span>) {
            <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-keyword">if</span> (visitedCnt == targetCnt) {
            foundStr = crackStr.toString();
            <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-keyword">int</span> root = <span class="hljs-number">10</span> * prev % ((<span class="hljs-keyword">int</span>) Math.pow(<span class="hljs-number">10</span>, n));
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; k; i++) {
            <span class="hljs-keyword">int</span> current = root + i;
            <span class="hljs-keyword">if</span> (!visited[current]) {
                crackStr.append(i);
                visited[current] = <span class="hljs-keyword">true</span>;
                dfsAddPwd(n, k, crackStr, current, visited, visitedCnt + <span class="hljs-number">1</span>, targetCnt);
                crackStr.setLength(crackStr.length() - <span class="hljs-number">1</span>);
                visited[current] = <span class="hljs-keyword">false</span>;
            }
        }
    }
}
</code></pre>
<h2 id="solution-c">Solution (C++)</h2>
<pre><code class="hljs lang-cpp"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span> {</span>
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-built_in">string</span> <span class="hljs-title">crackSafe</span><span class="hljs-params">(<span class="hljs-keyword">int</span> n, <span class="hljs-keyword">int</span> k)</span> </span>{
        <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> total_len = <span class="hljs-built_in">pow</span>(k, n) + n - <span class="hljs-number">1</span>;
        <span class="hljs-function"><span class="hljs-built_in">string</span> <span class="hljs-title">ans</span><span class="hljs-params">(n, <span class="hljs-string">'0'</span>)</span></span>;
        <span class="hljs-built_in">unordered_set</span>&lt;<span class="hljs-built_in">string</span>&gt; visited{ans};
        <span class="hljs-keyword">if</span> (dfs(ans, total_len, n, k, visited))
            <span class="hljs-keyword">return</span> ans;
        <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>;
    }
<span class="hljs-keyword">private</span>:
    <span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">dfs</span><span class="hljs-params">(<span class="hljs-built_in">string</span>&amp; ans, <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> total_len, <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> n, <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> k, <span class="hljs-built_in">unordered_set</span>&lt;<span class="hljs-built_in">string</span>&gt;&amp; visited)</span> </span>{
        <span class="hljs-keyword">if</span> (ans.length() == total_len)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;

        <span class="hljs-built_in">string</span> node = ans.substr(ans.length() - n + <span class="hljs-number">1</span>, n - <span class="hljs-number">1</span>);
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">char</span> c = <span class="hljs-string">'0'</span>; c &lt; <span class="hljs-string">'0'</span> + k; ++c) {
            node.push_back(c);
            <span class="hljs-keyword">if</span> (!visited.count(node)) {
                ans.push_back(c);
                visited.insert(node);
                <span class="hljs-keyword">if</span> (dfs(ans, total_len, n, k, visited)) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
                visited.erase(node);
                ans.pop_back();
            }
            node.pop_back();
        }

        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
};
</code></pre>
<p><strong>Explain:</strong></p>
<p>nope.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>Time complexity : O(n).</li>
<li>Space complexity : O(n).</li>
</ul></article></main><footer><a href="https://github.com/curest0x1021/Leetcode-Solution" target="_blank"><img src="https://curest0x1021.github.io/Leetcode-Solution/static/img/github.png" alt="github"/></a></footer></body></html>