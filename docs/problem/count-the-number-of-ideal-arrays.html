<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta http-equiv="X-UA-Compatible" content="ie=edge"/><title>Count the Number of Ideal Arrays - LeetCode javascript solutions</title><link rel="shortcut icon" href="https://curest0x1021.github.io/Leetcode-Solution/static/img/favicon.png" type="image/png"/><link rel="stylesheet" href="https://curest0x1021.github.io/Leetcode-Solution/static/css/app.css"/></head><body><header><h1>2338. Count the Number of Ideal Arrays</h1><div class="row"><div class="name">Difficulty:</div><div class="value"><a href="https://curest0x1021.github.io/Leetcode-Solution/difficulty/hard" class="tag">Hard</a></div></div><div class="row"><div class="name">Related Topics:</div><div class="value"><ul class="clearfix"><li><a href="https://curest0x1021.github.io/Leetcode-Solution/tag/math">Math</a></li><li><a href="https://curest0x1021.github.io/Leetcode-Solution/tag/dynamic-programming">Dynamic Programming</a></li><li><a href="https://curest0x1021.github.io/Leetcode-Solution/tag/combinatorics">Combinatorics</a></li><li><a href="https://curest0x1021.github.io/Leetcode-Solution/tag/number-theory">Number Theory</a></li></ul></div></div><div class="row"><div class="name">Similar Questions:</div><div class="value"><ul class="clearfix"><li><a href="https://curest0x1021.github.io/Leetcode-Solution/problem/count-ways-to-make-array-with-product.html">Count Ways to Make Array With Product</a></li></ul></div></div></header><main><article class="markdown-body"><h2 id="problem">Problem</h2>
<p>You are given two integers <code>n</code> and <code>maxValue</code>, which are used to describe an <strong>ideal</strong> array.</p>
<p>A <strong>0-indexed</strong> integer array <code>arr</code> of length <code>n</code> is considered <strong>ideal</strong> if the following conditions hold:</p>
<ul>
<li><p>Every <code>arr[i]</code> is a value from <code>1</code> to <code>maxValue</code>, for <code>0 &lt;= i &lt; n</code>.</p></li>
<li><p>Every <code>arr[i]</code> is divisible by <code>arr[i - 1]</code>, for <code>0 &lt; i &lt; n</code>.</p></li>
</ul>
<p>Return **the number of *<em>distinct</em>* ideal arrays of length **<code>n</code>. Since the answer may be very large, return it modulo <code>109 + 7</code>.</p>
<p>&nbsp;
<strong>Example 1:</strong></p>
<pre><code class="hljs">Input: n = <span class="hljs-number">2</span>, maxValue = <span class="hljs-number">5</span>
Output: <span class="hljs-number">10</span>
Explanation: The following are the possible ideal <span class="hljs-built_in">array</span>s:
- Arrays starting with the value <span class="hljs-number">1</span> (<span class="hljs-number">5</span> <span class="hljs-built_in">array</span>s): [<span class="hljs-number">1</span>,<span class="hljs-number">1</span>], [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>], [<span class="hljs-number">1</span>,<span class="hljs-number">3</span>], [<span class="hljs-number">1</span>,<span class="hljs-number">4</span>], [<span class="hljs-number">1</span>,<span class="hljs-number">5</span>]
- Arrays starting with the value <span class="hljs-number">2</span> (<span class="hljs-number">2</span> <span class="hljs-built_in">array</span>s): [<span class="hljs-number">2</span>,<span class="hljs-number">2</span>], [<span class="hljs-number">2</span>,<span class="hljs-number">4</span>]
- Arrays starting with the value <span class="hljs-number">3</span> (<span class="hljs-number">1</span> <span class="hljs-built_in">array</span>): [<span class="hljs-number">3</span>,<span class="hljs-number">3</span>]
- Arrays starting with the value <span class="hljs-number">4</span> (<span class="hljs-number">1</span> <span class="hljs-built_in">array</span>): [<span class="hljs-number">4</span>,<span class="hljs-number">4</span>]
- Arrays starting with the value <span class="hljs-number">5</span> (<span class="hljs-number">1</span> <span class="hljs-built_in">array</span>): [<span class="hljs-number">5</span>,<span class="hljs-number">5</span>]
There are a total of <span class="hljs-number">5</span> + <span class="hljs-number">2</span> + <span class="hljs-number">1</span> + <span class="hljs-number">1</span> + <span class="hljs-number">1</span> = <span class="hljs-number">10</span> distinct ideal <span class="hljs-built_in">array</span>s.
</code></pre>
<p><strong>Example 2:</strong></p>
<pre><code class="hljs">Input: n = <span class="hljs-number">5</span>, maxValue = <span class="hljs-number">3</span>
Output: <span class="hljs-number">11</span>
Explanation: The following are the possible ideal <span class="hljs-built_in">array</span>s:
- Arrays starting with the value <span class="hljs-number">1</span> (<span class="hljs-number">9</span> <span class="hljs-built_in">array</span>s): 
   - With no other distinct values (<span class="hljs-number">1</span> <span class="hljs-built_in">array</span>): [<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>] 
   - With <span class="hljs-number">2</span>nd distinct value <span class="hljs-number">2</span> (<span class="hljs-number">4</span> <span class="hljs-built_in">array</span>s): [<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>], [<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">2</span>], [<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">2</span>,<span class="hljs-number">2</span>], [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">2</span>,<span class="hljs-number">2</span>,<span class="hljs-number">2</span>]
   - With <span class="hljs-number">2</span>nd distinct value <span class="hljs-number">3</span> (<span class="hljs-number">4</span> <span class="hljs-built_in">array</span>s): [<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>], [<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>], [<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>], [<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>]
- Arrays starting with the value <span class="hljs-number">2</span> (<span class="hljs-number">1</span> <span class="hljs-built_in">array</span>): [<span class="hljs-number">2</span>,<span class="hljs-number">2</span>,<span class="hljs-number">2</span>,<span class="hljs-number">2</span>,<span class="hljs-number">2</span>]
- Arrays starting with the value <span class="hljs-number">3</span> (<span class="hljs-number">1</span> <span class="hljs-built_in">array</span>): [<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>]
There are a total of <span class="hljs-number">9</span> + <span class="hljs-number">1</span> + <span class="hljs-number">1</span> = <span class="hljs-number">11</span> distinct ideal <span class="hljs-built_in">array</span>s.
</code></pre>
<p>&nbsp;
<strong>Constraints:</strong></p>
<ul>
<li><p><code>2 &lt;= n &lt;= 104</code></p></li>
<li><p><code>1 &lt;= maxValue &lt;= 104</code></p></li>
</ul>
<h2 id="solution">Solution</h2>
<pre><code class="hljs lang-java"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">idealArrays</span><span class="hljs-params">(<span class="hljs-keyword">int</span> n, <span class="hljs-keyword">int</span> maxValue)</span> </span>{
        <span class="hljs-keyword">int</span> mod = (<span class="hljs-keyword">int</span>) (<span class="hljs-number">1e9</span> + <span class="hljs-number">7</span>);
        <span class="hljs-keyword">int</span> maxDistinct = (<span class="hljs-keyword">int</span>) (Math.log(maxValue) / Math.log(<span class="hljs-number">2</span>)) + <span class="hljs-number">1</span>;
        <span class="hljs-keyword">int</span>[][] dp = <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[maxDistinct + <span class="hljs-number">1</span>][maxValue + <span class="hljs-number">1</span>];
        Arrays.fill(dp[<span class="hljs-number">1</span>], <span class="hljs-number">1</span>);
        dp[<span class="hljs-number">1</span>][<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">2</span>; i &lt;= maxDistinct; i++) {
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">1</span>; j &lt;= maxValue; j++) {
                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> k = <span class="hljs-number">2</span>; j * k &lt;= maxValue &amp;&amp; dp[i - <span class="hljs-number">1</span>][j * k] != <span class="hljs-number">0</span>; k++) {
                    dp[i][j] += dp[i - <span class="hljs-number">1</span>][j * k];
                }
            }
        }
        <span class="hljs-keyword">int</span>[] sum = <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[maxDistinct + <span class="hljs-number">1</span>];
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= maxDistinct; i++) {
            sum[i] = Arrays.stream(dp[i]).sum();
        }
        <span class="hljs-keyword">long</span>[] invs = <span class="hljs-keyword">new</span> <span class="hljs-keyword">long</span>[Math.min(n, maxDistinct) + <span class="hljs-number">1</span>];
        invs[<span class="hljs-number">1</span>] = <span class="hljs-number">1</span>;
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">2</span>; i &lt; invs.length; i++) {
            invs[i] = mod - mod / i * invs[mod % i] % mod;
        }
        <span class="hljs-keyword">long</span> result = maxValue;
        <span class="hljs-keyword">long</span> comb = (<span class="hljs-keyword">long</span>) n - <span class="hljs-number">1</span>;
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">2</span>; i &lt;= maxDistinct &amp;&amp; i &lt;= n; i++) {
            result += (sum[i] * comb) % mod;
            comb *= n - i;
            comb %= mod;
            comb *= invs[i];
            comb %= mod;
        }
        <span class="hljs-keyword">return</span> (<span class="hljs-keyword">int</span>) (result % mod);
    }
}
</code></pre>
<p><strong>Explain:</strong></p>
<p>nope.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>Time complexity : O(n).</li>
<li>Space complexity : O(n).</li>
</ul></article></main><footer><a href="https://github.com/curest0x1021/Leetcode-Solution" target="_blank"><img src="https://curest0x1021.github.io/Leetcode-Solution/static/img/github.png" alt="github"/></a></footer></body></html>