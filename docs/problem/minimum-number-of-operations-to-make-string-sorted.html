<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta http-equiv="X-UA-Compatible" content="ie=edge"/><title>Minimum Number of Operations to Make String Sorted - LeetCode javascript solutions</title><link rel="shortcut icon" href="https://curest0x1021.github.io/Leetcode-Solution/static/img/favicon.png" type="image/png"/><link rel="stylesheet" href="https://curest0x1021.github.io/Leetcode-Solution/static/css/app.css"/></head><body><header><h1>1830. Minimum Number of Operations to Make String Sorted</h1><div class="row"><div class="name">Difficulty:</div><div class="value"><a href="https://curest0x1021.github.io/Leetcode-Solution/difficulty/hard" class="tag">Hard</a></div></div><div class="row"><div class="name">Related Topics:</div><div class="value"><ul class="clearfix"><li><a href="https://curest0x1021.github.io/Leetcode-Solution/tag/math">Math</a></li><li><a href="https://curest0x1021.github.io/Leetcode-Solution/tag/string">String</a></li><li><a href="https://curest0x1021.github.io/Leetcode-Solution/tag/combinatorics">Combinatorics</a></li></ul></div></div><div class="row"><div class="name">Similar Questions:</div><div class="value"><ul class="clearfix"></ul></div></div></header><main><article class="markdown-body"><h2 id="problem">Problem</h2>
<p>You are given a string <code>s</code> (<strong>0-indexed</strong>)​​​​​​. You are asked to perform the following operation on <code>s</code>​​​​​​ until you get a sorted string:</p>
<ul>
<li><p>Find <strong>the largest index</strong> <code>i</code> such that <code>1 &lt;= i &lt; s.length</code> and <code>s[i] &lt; s[i - 1]</code>.</p></li>
<li><p>Find <strong>the largest index</strong> <code>j</code> such that <code>i &lt;= j &lt; s.length</code> and <code>s[k] &lt; s[i - 1]</code> for all the possible values of <code>k</code> in the range <code>[i, j]</code> inclusive.</p></li>
<li><p>Swap the two characters at indices <code>i - 1</code>​​​​ and <code>j</code>​​​​​.</p></li>
<li><p>Reverse the suffix starting at index <code>i</code>​​​​​​.</p></li>
</ul>
<p>Return <strong>the number of operations needed to make the string sorted.</strong> Since the answer can be too large, return it <strong>modulo</strong> <code>109 + 7</code>.</p>
<p>&nbsp;
<strong>Example 1:</strong></p>
<pre><code class="hljs">Input: s = <span class="hljs-string">"cba"</span>
Output: 5
Explanation: The simulation goes as follows:
Operation 1: <span class="hljs-attribute">i</span>=2, <span class="hljs-attribute">j</span>=2. Swap s[1] <span class="hljs-keyword">and</span> s[2] <span class="hljs-keyword">to</span> <span class="hljs-builtin-name">get</span> <span class="hljs-attribute">s</span>=<span class="hljs-string">"cab"</span>, then reverse the suffix starting at 2. Now, <span class="hljs-attribute">s</span>=<span class="hljs-string">"cab"</span>.
Operation 2: <span class="hljs-attribute">i</span>=1, <span class="hljs-attribute">j</span>=2. Swap s[0] <span class="hljs-keyword">and</span> s[2] <span class="hljs-keyword">to</span> <span class="hljs-builtin-name">get</span> <span class="hljs-attribute">s</span>=<span class="hljs-string">"bac"</span>, then reverse the suffix starting at 1. Now, <span class="hljs-attribute">s</span>=<span class="hljs-string">"bca"</span>.
Operation 3: <span class="hljs-attribute">i</span>=2, <span class="hljs-attribute">j</span>=2. Swap s[1] <span class="hljs-keyword">and</span> s[2] <span class="hljs-keyword">to</span> <span class="hljs-builtin-name">get</span> <span class="hljs-attribute">s</span>=<span class="hljs-string">"bac"</span>, then reverse the suffix starting at 2. Now, <span class="hljs-attribute">s</span>=<span class="hljs-string">"bac"</span>.
Operation 4: <span class="hljs-attribute">i</span>=1, <span class="hljs-attribute">j</span>=1. Swap s[0] <span class="hljs-keyword">and</span> s[1] <span class="hljs-keyword">to</span> <span class="hljs-builtin-name">get</span> <span class="hljs-attribute">s</span>=<span class="hljs-string">"abc"</span>, then reverse the suffix starting at 1. Now, <span class="hljs-attribute">s</span>=<span class="hljs-string">"acb"</span>.
Operation 5: <span class="hljs-attribute">i</span>=2, <span class="hljs-attribute">j</span>=2. Swap s[1] <span class="hljs-keyword">and</span> s[2] <span class="hljs-keyword">to</span> <span class="hljs-builtin-name">get</span> <span class="hljs-attribute">s</span>=<span class="hljs-string">"abc"</span>, then reverse the suffix starting at 2. Now, <span class="hljs-attribute">s</span>=<span class="hljs-string">"abc"</span>.
</code></pre>
<p><strong>Example 2:</strong></p>
<pre><code class="hljs">Input: s = <span class="hljs-string">"aabaa"</span>
Output: 2
Explanation: The simulation goes as follows:
Operation 1: <span class="hljs-attribute">i</span>=3, <span class="hljs-attribute">j</span>=4. Swap s[2] <span class="hljs-keyword">and</span> s[4] <span class="hljs-keyword">to</span> <span class="hljs-builtin-name">get</span> <span class="hljs-attribute">s</span>=<span class="hljs-string">"aaaab"</span>, then reverse the substring starting at 3. Now, <span class="hljs-attribute">s</span>=<span class="hljs-string">"aaaba"</span>.
Operation 2: <span class="hljs-attribute">i</span>=4, <span class="hljs-attribute">j</span>=4. Swap s[3] <span class="hljs-keyword">and</span> s[4] <span class="hljs-keyword">to</span> <span class="hljs-builtin-name">get</span> <span class="hljs-attribute">s</span>=<span class="hljs-string">"aaaab"</span>, then reverse the substring starting at 4. Now, <span class="hljs-attribute">s</span>=<span class="hljs-string">"aaaab"</span>.
</code></pre>
<p>&nbsp;
<strong>Constraints:</strong></p>
<ul>
<li><p><code>1 &lt;= s.length &lt;= 3000</code></p></li>
<li><p><code>s</code>​​​​​​ consists only of lowercase English letters.</p></li>
</ul>
<h2 id="solution">Solution</h2>
<pre><code class="hljs lang-java"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">makeStringSorted</span><span class="hljs-params">(String s)</span> </span>{
        <span class="hljs-keyword">int</span> n = s.length();
        <span class="hljs-keyword">int</span>[] count = <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[<span class="hljs-number">26</span>];
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) {
            count[s.charAt(i) - <span class="hljs-string">'a'</span>]++;
        }

        <span class="hljs-keyword">long</span>[] fact = <span class="hljs-keyword">new</span> <span class="hljs-keyword">long</span>[n + <span class="hljs-number">1</span>];
        fact[<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>;
        <span class="hljs-keyword">int</span> mod = <span class="hljs-number">1000000007</span>;
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++) {
            fact[i] = (fact[i - <span class="hljs-number">1</span>] * i) % mod;
        }
        <span class="hljs-keyword">int</span> len = n;
        <span class="hljs-keyword">long</span> ans = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) {
            len--;
            <span class="hljs-keyword">int</span> bound = s.charAt(i) - <span class="hljs-string">'a'</span>;
            <span class="hljs-keyword">int</span> first = <span class="hljs-number">0</span>;
            <span class="hljs-keyword">long</span> rev = <span class="hljs-number">1</span>;
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> k = <span class="hljs-number">0</span>; k &lt; <span class="hljs-number">26</span>; k++) {
                <span class="hljs-keyword">if</span> (k &lt; bound) {
                    first += count[k];
                }
                rev = (rev * fact[count[k]]) % mod;
            }
            ans =
                    ans % mod
                            + (((first * fact[len]) % mod)
                                            * (modPow(rev, (<span class="hljs-keyword">long</span>) mod - <span class="hljs-number">2</span>, mod))
                                            % mod)
                                    % mod;
            ans = ans % mod;
            count[bound]--;
        }
        <span class="hljs-keyword">return</span> (<span class="hljs-keyword">int</span>) ans;
    }

    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">long</span> <span class="hljs-title">modPow</span><span class="hljs-params">(<span class="hljs-keyword">long</span> x, <span class="hljs-keyword">long</span> n, <span class="hljs-keyword">int</span> m)</span> </span>{
        <span class="hljs-keyword">long</span> result = <span class="hljs-number">1</span>;
        <span class="hljs-keyword">while</span> (n &gt; <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">if</span> ((n &amp; <span class="hljs-number">1</span>) != <span class="hljs-number">0</span>) {
                result = (result * x) % m;
            }
            x = (x * x) % m;
            n = n &gt;&gt; <span class="hljs-number">1</span>;
        }
        <span class="hljs-keyword">return</span> result;
    }
}
</code></pre>
<p><strong>Explain:</strong></p>
<p>nope.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>Time complexity : O(n).</li>
<li>Space complexity : O(n).</li>
</ul></article></main><footer><a href="https://github.com/curest0x1021/Leetcode-Solution" target="_blank"><img src="https://curest0x1021.github.io/Leetcode-Solution/static/img/github.png" alt="github"/></a></footer></body></html>