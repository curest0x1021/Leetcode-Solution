<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta http-equiv="X-UA-Compatible" content="ie=edge"/><title>Circular Array Loop - LeetCode javascript solutions</title><link rel="shortcut icon" href="https://curest0x1021.github.io/Leetcode-Solution/static/img/favicon.png" type="image/png"/><link rel="stylesheet" href="https://curest0x1021.github.io/Leetcode-Solution/static/css/app.css"/></head><body><header><h1>457. Circular Array Loop</h1><div class="row"><div class="name">Difficulty:</div><div class="value"><a href="https://curest0x1021.github.io/Leetcode-Solution/difficulty/medium" class="tag">Medium</a></div></div><div class="row"><div class="name">Related Topics:</div><div class="value"><ul class="clearfix"><li><a href="https://curest0x1021.github.io/Leetcode-Solution/tag/array">Array</a></li><li><a href="https://curest0x1021.github.io/Leetcode-Solution/tag/hash-table">Hash Table</a></li><li><a href="https://curest0x1021.github.io/Leetcode-Solution/tag/two-pointers">Two Pointers</a></li></ul></div></div><div class="row"><div class="name">Similar Questions:</div><div class="value"><ul class="clearfix"></ul></div></div></header><main><article class="markdown-body"><h2 id="problem">Problem</h2>
<p>You are playing a game involving a <strong>circular</strong> array of non-zero integers <code>nums</code>. Each <code>nums[i]</code> denotes the number of indices forward/backward you must move if you are located at index <code>i</code>:</p>
<ul>
<li><p>If <code>nums[i]</code> is positive, move <code>nums[i]</code> steps <strong>forward</strong>, and</p></li>
<li><p>If <code>nums[i]</code> is negative, move <code>nums[i]</code> steps <strong>backward</strong>.</p></li>
</ul>
<p>Since the array is <strong>circular</strong>, you may assume that moving forward from the last element puts you on the first element, and moving backwards from the first element puts you on the last element.</p>
<p>A <strong>cycle</strong> in the array consists of a sequence of indices <code>seq</code> of length <code>k</code> where:</p>
<ul>
<li><p>Following the movement rules above results in the repeating index sequence <code>seq[0] -&gt; seq[1] -&gt; ... -&gt; seq[k - 1] -&gt; seq[0] -&gt; ...</code></p></li>
<li><p>Every <code>nums[seq[j]]</code> is either <strong>all positive</strong> or <strong>all negative</strong>.</p></li>
<li><p><code>k &gt; 1</code></p></li>
</ul>
<p>Return <code>true</code>** if there is a <strong>cycle</strong> in <strong><code>nums</code></strong>, or <strong><code>false</code></strong> otherwise**.</p>
<p>&nbsp;
<strong>Example 1:</strong></p>
<pre><code class="hljs">Input: nums = [<span class="hljs-number">2</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">2</span>]
Output: <span class="hljs-literal">true</span>
Explanation:
There <span class="hljs-keyword">is</span> a cycle <span class="hljs-keyword">from</span> index <span class="hljs-number">0</span> -&gt; <span class="hljs-number">2</span> -&gt; <span class="hljs-number">3</span> -&gt; <span class="hljs-number">0</span> -&gt; ...
The cycle<span class="hljs-string">'s length is 3.</span>
</code></pre>
<p><strong>Example 2:</strong></p>
<pre><code class="hljs"><span class="hljs-attr">Input:</span> <span class="hljs-string">nums</span> <span class="hljs-string">=</span> <span class="hljs-string">[-1,2]</span>
<span class="hljs-attr">Output:</span> <span class="hljs-literal">false</span>
<span class="hljs-attr">Explanation:</span>
<span class="hljs-string">The</span> <span class="hljs-string">sequence</span> <span class="hljs-string">from</span> <span class="hljs-string">index</span> <span class="hljs-number">1</span> <span class="hljs-string">-&gt;</span> <span class="hljs-number">1</span> <span class="hljs-string">-&gt;</span> <span class="hljs-number">1</span> <span class="hljs-string">-&gt;</span> <span class="hljs-string">...</span> <span class="hljs-string">is</span> <span class="hljs-string">not</span> <span class="hljs-string">a</span> <span class="hljs-string">cycle</span> <span class="hljs-string">because</span> <span class="hljs-string">the</span> <span class="hljs-string">sequence's</span> <span class="hljs-string">length</span> <span class="hljs-string">is</span> <span class="hljs-number">1</span><span class="hljs-string">.</span>
<span class="hljs-string">By</span> <span class="hljs-string">definition</span> <span class="hljs-string">the</span> <span class="hljs-string">sequence's</span> <span class="hljs-string">length</span> <span class="hljs-string">must</span> <span class="hljs-string">be</span> <span class="hljs-string">strictly</span> <span class="hljs-string">greater</span> <span class="hljs-string">than</span> <span class="hljs-number">1</span> <span class="hljs-string">to</span> <span class="hljs-string">be</span> <span class="hljs-string">a</span> <span class="hljs-string">cycle.</span>
</code></pre>
<p><strong>Example 3:</strong></p>
<pre><code class="hljs">Input: nums = [<span class="hljs-number">-2</span>,<span class="hljs-number">1</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">-2</span>,<span class="hljs-number">-2</span>]
Output: <span class="hljs-literal">false</span>
Explanation:
The sequence <span class="hljs-keyword">from</span> index <span class="hljs-number">1</span> -&gt; <span class="hljs-number">2</span> -&gt; <span class="hljs-number">1</span> -&gt; ... <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> a cycle because nums[<span class="hljs-number">1</span>] <span class="hljs-keyword">is</span> positive, but nums[<span class="hljs-number">2</span>] <span class="hljs-keyword">is</span> negative.
Every nums[seq[j]] must be either all positive <span class="hljs-keyword">or</span> all negative.
</code></pre>
<p>&nbsp;
<strong>Constraints:</strong></p>
<ul>
<li><p><code>1 &lt;= nums.length &lt;= 5000</code></p></li>
<li><p><code>-1000 &lt;= nums[i] &lt;= 1000</code></p></li>
<li><p><code>nums[i] != 0</code></p></li>
</ul>
<p>&nbsp;
<strong>Follow up:</strong> Could you solve it in <code>O(n)</code> time complexity and <code>O(1)</code> extra space complexity?</p>
<h2 id="solution-java">Solution (Java)</h2>
<pre><code class="hljs lang-java"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">circularArrayLoop</span><span class="hljs-params">(<span class="hljs-keyword">int</span>[] arr)</span> </span>{
        <span class="hljs-keyword">int</span> n = arr.length;
        Map&lt;Integer, Integer&gt; map = <span class="hljs-keyword">new</span> HashMap&lt;&gt;();
        <span class="hljs-comment">// arr[i]%n==0 (cycle)</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> start = <span class="hljs-number">0</span>; start &lt; n; start++) {
            <span class="hljs-keyword">if</span> (map.containsKey(start)) {
                <span class="hljs-comment">// check if already visited</span>
                <span class="hljs-keyword">continue</span>;
            }
            <span class="hljs-keyword">int</span> curr = start;
            <span class="hljs-comment">// Check if the current index is valid</span>
            <span class="hljs-keyword">while</span> (isValidCycle(start, curr, arr)) {
                <span class="hljs-comment">// marking current index visited and set value as start of loop</span>
                map.put(curr, start);
                <span class="hljs-comment">// steps to jump;</span>
                <span class="hljs-keyword">int</span> jump = arr[curr] % n;
                <span class="hljs-comment">// Jumping x steps backwards is same as jumping (n-x) steps forward</span>
                <span class="hljs-comment">// going to next index;</span>
                curr = (curr + jump + n) % n;
                <span class="hljs-keyword">if</span> (map.containsKey(curr)) {
                    <span class="hljs-comment">// value already processed</span>
                    <span class="hljs-keyword">if</span> (map.get(curr) == start) {
                        <span class="hljs-comment">// If equal to start then we have found a loop</span>
                        <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
                    }
                    <span class="hljs-comment">// Else we can break since this has already been visited hence we will get the</span>
                    <span class="hljs-comment">// same result as before</span>
                    <span class="hljs-keyword">break</span>;
                }
            }
        }
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
    }

    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">isValidCycle</span><span class="hljs-params">(<span class="hljs-keyword">int</span> start, <span class="hljs-keyword">int</span> curr, <span class="hljs-keyword">int</span>[] arr)</span> </span>{
        <span class="hljs-keyword">return</span> (arr[start] &lt;= <span class="hljs-number">0</span> || arr[curr] &gt;= <span class="hljs-number">0</span>)
                &amp;&amp; (arr[start] &gt;= <span class="hljs-number">0</span> || arr[curr] &lt;= <span class="hljs-number">0</span>)
                &amp;&amp; (arr[curr] % arr.length != <span class="hljs-number">0</span>);
    }
}
</code></pre>
<p><strong>Explain:</strong></p>
<p>nope.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>Time complexity : O(n).</li>
<li>Space complexity : O(n).</li>
</ul></article></main><footer><a href="https://github.com/curest0x1021/Leetcode-Solution" target="_blank"><img src="https://curest0x1021.github.io/Leetcode-Solution/static/img/github.png" alt="github"/></a></footer></body></html>