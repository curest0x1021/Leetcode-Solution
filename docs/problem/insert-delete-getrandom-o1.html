<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta http-equiv="X-UA-Compatible" content="ie=edge"/><title>Insert Delete GetRandom O(1) - LeetCode javascript solutions</title><link rel="shortcut icon" href="https://curest0x1021.github.io/Leetcode-Solution/static/img/favicon.png" type="image/png"/><link rel="stylesheet" href="https://curest0x1021.github.io/Leetcode-Solution/static/css/app.css"/></head><body><header><h1>380. Insert Delete GetRandom O(1)</h1><div class="row"><div class="name">Difficulty:</div><div class="value"><a href="https://curest0x1021.github.io/Leetcode-Solution/difficulty/medium" class="tag">Medium</a></div></div><div class="row"><div class="name">Related Topics:</div><div class="value"><ul class="clearfix"><li><a href="https://curest0x1021.github.io/Leetcode-Solution/tag/array">Array</a></li><li><a href="https://curest0x1021.github.io/Leetcode-Solution/tag/hash-table">Hash Table</a></li><li><a href="https://curest0x1021.github.io/Leetcode-Solution/tag/math">Math</a></li><li><a href="https://curest0x1021.github.io/Leetcode-Solution/tag/design">Design</a></li><li><a href="https://curest0x1021.github.io/Leetcode-Solution/tag/randomized">Randomized</a></li></ul></div></div><div class="row"><div class="name">Similar Questions:</div><div class="value"><ul class="clearfix"><li><a href="https://curest0x1021.github.io/Leetcode-Solution/problem/insert-delete-getrandom-o1-duplicates-allowed.html">Insert Delete GetRandom O(1) - Duplicates allowed</a></li></ul></div></div></header><main><article class="markdown-body"><h2 id="problem">Problem</h2>
<p>Implement the <code>RandomizedSet</code> class:</p>
<ul>
<li><p><code>RandomizedSet()</code> Initializes the <code>RandomizedSet</code> object.</p></li>
<li><p><code>bool insert(int val)</code> Inserts an item <code>val</code> into the set if not present. Returns <code>true</code> if the item was not present, <code>false</code> otherwise.</p></li>
<li><p><code>bool remove(int val)</code> Removes an item <code>val</code> from the set if present. Returns <code>true</code> if the item was present, <code>false</code> otherwise.</p></li>
<li><p><code>int getRandom()</code> Returns a random element from the current set of elements (it's guaranteed that at least one element exists when this method is called). Each element must have the <strong>same probability</strong> of being returned.</p></li>
</ul>
<p>You must implement the functions of the class such that each function works in&nbsp;<strong>average</strong>&nbsp;<code>O(1)</code>&nbsp;time complexity.</p>
<p>&nbsp;
<strong>Example 1:</strong></p>
<pre><code class="hljs"><span class="hljs-keyword">Input</span>
["RandomizedSet", "insert", "remove", "insert", "getRandom", "remove", "insert", "getRandom"]
[[], [<span class="hljs-number">1</span>], [<span class="hljs-number">2</span>], [<span class="hljs-number">2</span>], [], [<span class="hljs-number">1</span>], [<span class="hljs-number">2</span>], []]
Output
[<span class="hljs-keyword">null</span>, <span class="hljs-keyword">true</span>, <span class="hljs-keyword">false</span>, <span class="hljs-keyword">true</span>, <span class="hljs-number">2</span>, <span class="hljs-keyword">true</span>, <span class="hljs-keyword">false</span>, <span class="hljs-number">2</span>]

Explanation
RandomizedSet randomizedSet = <span class="hljs-built_in">new</span> RandomizedSet();
randomizedSet.<span class="hljs-keyword">insert</span>(<span class="hljs-number">1</span>); // Inserts <span class="hljs-number">1</span> <span class="hljs-keyword">to</span> the <span class="hljs-keyword">set</span>. <span class="hljs-keyword">Returns</span> <span class="hljs-keyword">true</span> <span class="hljs-keyword">as</span> <span class="hljs-number">1</span> was inserted successfully.
randomizedSet.remove(<span class="hljs-number">2</span>); // <span class="hljs-keyword">Returns</span> <span class="hljs-keyword">false</span> <span class="hljs-keyword">as</span> <span class="hljs-number">2</span> does <span class="hljs-keyword">not</span> exist <span class="hljs-keyword">in</span> the <span class="hljs-keyword">set</span>.
randomizedSet.<span class="hljs-keyword">insert</span>(<span class="hljs-number">2</span>); // Inserts <span class="hljs-number">2</span> <span class="hljs-keyword">to</span> the <span class="hljs-keyword">set</span>, <span class="hljs-keyword">returns</span> <span class="hljs-keyword">true</span>. <span class="hljs-keyword">Set</span> now contains [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>].
randomizedSet.getRandom(); // getRandom() should <span class="hljs-keyword">return</span> either <span class="hljs-number">1</span> <span class="hljs-keyword">or</span> <span class="hljs-number">2</span> randomly.
randomizedSet.remove(<span class="hljs-number">1</span>); // Removes <span class="hljs-number">1</span> <span class="hljs-keyword">from</span> the <span class="hljs-keyword">set</span>, <span class="hljs-keyword">returns</span> <span class="hljs-keyword">true</span>. <span class="hljs-keyword">Set</span> now contains [<span class="hljs-number">2</span>].
randomizedSet.<span class="hljs-keyword">insert</span>(<span class="hljs-number">2</span>); // <span class="hljs-number">2</span> was already <span class="hljs-keyword">in</span> the <span class="hljs-keyword">set</span>, so <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>.
randomizedSet.getRandom(); // Since <span class="hljs-number">2</span> <span class="hljs-keyword">is</span> the <span class="hljs-keyword">only</span> number <span class="hljs-keyword">in</span> the <span class="hljs-keyword">set</span>, getRandom() will <span class="hljs-keyword">always</span> <span class="hljs-keyword">return</span> <span class="hljs-number">2.</span>
</code></pre>
<p>&nbsp;
<strong>Constraints:</strong></p>
<ul>
<li><p><code>-231 &lt;= val &lt;= 231 - 1</code></p></li>
<li><p>At most <code>2 *&amp;nbsp;</code><code>105</code> calls will be made to <code>insert</code>, <code>remove</code>, and <code>getRandom</code>.</p></li>
<li><p>There will be <strong>at least one</strong> element in the data structure when <code>getRandom</code> is called.</p></li>
</ul>
<h2 id="solution">Solution</h2>
<pre><code class="hljs lang-javascript"><span class="hljs-comment">/**
 * Initialize your data structure here.
 */</span>
<span class="hljs-keyword">var</span> RandomizedSet = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">this</span>.nums = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>();
  <span class="hljs-keyword">this</span>.locs = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Object</span>();
};

<span class="hljs-comment">/**
 * Inserts a value to the set. Returns true if the set did not already contain the specified element.
 * @param {number} val
 * @return {boolean}
 */</span>
RandomizedSet.prototype.insert = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">val</span>) </span>{
  <span class="hljs-keyword">if</span> (!(val <span class="hljs-keyword">in</span> <span class="hljs-keyword">this</span>.locs)) {
    <span class="hljs-keyword">this</span>.nums.push(val);
    <span class="hljs-keyword">this</span>.locs[val] = <span class="hljs-keyword">this</span>.nums.length - <span class="hljs-number">1</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  }
  <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
};

<span class="hljs-comment">/**
 * Removes a value from the set. Returns true if the set contained the specified element.
 * @param {number} val
 * @return {boolean}
 */</span>
RandomizedSet.prototype.remove = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">val</span>) </span>{
    <span class="hljs-keyword">if</span>(val <span class="hljs-keyword">in</span> <span class="hljs-keyword">this</span>.locs) {
        <span class="hljs-keyword">let</span> loc = <span class="hljs-keyword">this</span>.locs[val];
        <span class="hljs-keyword">let</span> lastEl = <span class="hljs-keyword">this</span>.nums[<span class="hljs-keyword">this</span>.nums.length - <span class="hljs-number">1</span>];
        <span class="hljs-keyword">this</span>.nums[loc] = lastEl;
        <span class="hljs-keyword">this</span>.locs[lastEl] = loc;
        <span class="hljs-keyword">this</span>.nums.pop();
        <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>.locs[val];
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
};

<span class="hljs-comment">/**
 * Get a random element from the set.
 * @return {number}
 */</span>
RandomizedSet.prototype.getRandom = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.nums[<span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Math</span>.random() * <span class="hljs-keyword">this</span>.nums.length)];
};
</code></pre>
<p><strong>Explain:</strong></p>
<p>nope.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>Time complexity : O(n).</li>
<li>Space complexity : O(n).</li>
</ul></article></main><footer><a href="https://github.com/curest0x1021/Leetcode-Solution" target="_blank"><img src="https://curest0x1021.github.io/Leetcode-Solution/static/img/github.png" alt="github"/></a></footer></body></html>