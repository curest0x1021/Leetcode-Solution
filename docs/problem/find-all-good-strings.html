<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta http-equiv="X-UA-Compatible" content="ie=edge"/><title>Find All Good Strings - LeetCode javascript solutions</title><link rel="shortcut icon" href="https://curest0x1021.github.io/Leetcode-Solution/static/img/favicon.png" type="image/png"/><link rel="stylesheet" href="https://curest0x1021.github.io/Leetcode-Solution/static/css/app.css"/></head><body><header><h1>1397. Find All Good Strings</h1><div class="row"><div class="name">Difficulty:</div><div class="value"><a href="https://curest0x1021.github.io/Leetcode-Solution/difficulty/hard" class="tag">Hard</a></div></div><div class="row"><div class="name">Related Topics:</div><div class="value"><ul class="clearfix"><li><a href="https://curest0x1021.github.io/Leetcode-Solution/tag/string">String</a></li><li><a href="https://curest0x1021.github.io/Leetcode-Solution/tag/dynamic-programming">Dynamic Programming</a></li><li><a href="https://curest0x1021.github.io/Leetcode-Solution/tag/string-matching">String Matching</a></li></ul></div></div><div class="row"><div class="name">Similar Questions:</div><div class="value"><ul class="clearfix"></ul></div></div></header><main><article class="markdown-body"><h2 id="problem">Problem</h2>
<p>Given the strings <code>s1</code> and <code>s2</code> of size <code>n</code> and the string <code>evil</code>, return **the number of *<em>good</em>* strings**.</p>
<p>A <strong>good</strong> string has size <code>n</code>, it is alphabetically greater than or equal to <code>s1</code>, it is alphabetically smaller than or equal to <code>s2</code>, and it does not contain the string <code>evil</code> as a substring. Since the answer can be a huge number, return this <strong>modulo</strong> <code>109 + 7</code>.</p>
<p>&nbsp;
<strong>Example 1:</strong></p>
<pre><code class="hljs">Input: n = <span class="hljs-number">2</span>, s1 = <span class="hljs-string">"aa"</span>, s2 = <span class="hljs-string">"da"</span>, evil = <span class="hljs-string">"b"</span>
Output: <span class="hljs-number">51</span> 
Explanation: There are <span class="hljs-number">25</span> good strings starting <span class="hljs-keyword">with</span> <span class="hljs-string">'a'</span>: <span class="hljs-string">"aa"</span>,<span class="hljs-string">"ac"</span>,<span class="hljs-string">"ad"</span>,...,<span class="hljs-string">"az"</span>. Then there are <span class="hljs-number">25</span> good strings starting <span class="hljs-keyword">with</span> <span class="hljs-string">'c'</span>: <span class="hljs-string">"ca"</span>,<span class="hljs-string">"cc"</span>,<span class="hljs-string">"cd"</span>,...,<span class="hljs-string">"cz"</span> and <span class="hljs-keyword">finally</span> there <span class="hljs-keyword">is</span> one good <span class="hljs-built_in">string</span> starting <span class="hljs-keyword">with</span> <span class="hljs-string">'d'</span>: <span class="hljs-string">"da"</span>.&amp;nbsp;
</code></pre>
<p><strong>Example 2:</strong></p>
<pre><code class="hljs">Input: n = 8, s1 = <span class="hljs-string">"leetcode"</span>, s2 = <span class="hljs-string">"leetgoes"</span>, evil = <span class="hljs-string">"leet"</span>
Output: 0 
Explanation: All strings greater than <span class="hljs-keyword">or</span> equal <span class="hljs-keyword">to</span> s1 <span class="hljs-keyword">and</span> smaller than <span class="hljs-keyword">or</span> equal <span class="hljs-keyword">to</span> s2 start with the<span class="hljs-built_in"> prefix </span><span class="hljs-string">"leet"</span>, therefore, there is <span class="hljs-keyword">not</span> any good string.
</code></pre>
<p><strong>Example 3:</strong></p>
<pre><code class="hljs">Input: <span class="hljs-attr">n</span> = <span class="hljs-number">2</span>, <span class="hljs-attr">s1</span> = <span class="hljs-string">"gx"</span>, <span class="hljs-attr">s2</span> = <span class="hljs-string">"gz"</span>, <span class="hljs-attr">evil</span> = <span class="hljs-string">"x"</span>
Output: <span class="hljs-number">2</span>
</code></pre>
<p>&nbsp;
<strong>Constraints:</strong></p>
<ul>
<li><p><code>s1.length == n</code></p></li>
<li><p><code>s2.length == n</code></p></li>
<li><p><code>s1 &lt;= s2</code></p></li>
<li><p><code>1 &lt;= n &lt;= 500</code></p></li>
<li><p><code>1 &lt;= evil.length &lt;= 50</code></p></li>
<li><p>All strings consist of lowercase English letters.</p></li>
</ul>
<h2 id="solution">Solution</h2>
<pre><code class="hljs lang-java"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span> </span>{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> mod = <span class="hljs-number">1_000_000_007</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span>[] next;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">findGoodStrings</span><span class="hljs-params">(<span class="hljs-keyword">int</span> n, String s1, String s2, String evil)</span> </span>{
        <span class="hljs-keyword">char</span>[] s1arr = s1.toCharArray();
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = s1.length() - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) {
            <span class="hljs-keyword">if</span> (s1arr[i] &gt; <span class="hljs-string">'a'</span>) {
                s1arr[i] = (<span class="hljs-keyword">char</span>) (s1arr[i] - <span class="hljs-number">1</span>);
                <span class="hljs-keyword">break</span>;
            } <span class="hljs-keyword">else</span> {
                s1arr[i] = <span class="hljs-string">'z'</span>;
            }
        }
        s1 = <span class="hljs-keyword">new</span> String(s1arr);
        next = getNext(evil);
        <span class="hljs-keyword">if</span> (s1.compareTo(s2) &gt; <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">return</span> lessOrEqualThan(s2, evil);
        }
        <span class="hljs-keyword">return</span> (lessOrEqualThan(s2, evil) - lessOrEqualThan(s1, evil) + mod) % mod;
    }

    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> <span class="hljs-title">lessOrEqualThan</span><span class="hljs-params">(String s, String e)</span> </span>{
        <span class="hljs-keyword">long</span>[][][] dp = <span class="hljs-keyword">new</span> <span class="hljs-keyword">long</span>[s.length() + <span class="hljs-number">1</span>][e.length() + <span class="hljs-number">1</span>][<span class="hljs-number">2</span>];
        dp[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>][<span class="hljs-number">1</span>] = <span class="hljs-number">1</span>;
        <span class="hljs-keyword">long</span> res = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; s.length(); i++) {
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> state = <span class="hljs-number">0</span>; state &lt; e.length(); state++) {
                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">char</span> c = <span class="hljs-string">'a'</span>; c &lt;= <span class="hljs-string">'z'</span>; c++) {
                    <span class="hljs-keyword">int</span> nextstate = getNextState(state, c, e);
                    dp[i + <span class="hljs-number">1</span>][nextstate][<span class="hljs-number">0</span>] = (dp[i + <span class="hljs-number">1</span>][nextstate][<span class="hljs-number">0</span>] + dp[i][state][<span class="hljs-number">0</span>]) % mod;
                }
                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">char</span> c = <span class="hljs-string">'a'</span>; c &lt; s.charAt(i); c++) {
                    <span class="hljs-keyword">int</span> nextstate = getNextState(state, c, e);
                    dp[i + <span class="hljs-number">1</span>][nextstate][<span class="hljs-number">0</span>] = (dp[i + <span class="hljs-number">1</span>][nextstate][<span class="hljs-number">0</span>] + dp[i][state][<span class="hljs-number">1</span>]) % mod;
                }
                <span class="hljs-keyword">int</span> nextstate = getNextState(state, s.charAt(i), e);
                dp[i + <span class="hljs-number">1</span>][nextstate][<span class="hljs-number">1</span>] = (dp[i + <span class="hljs-number">1</span>][nextstate][<span class="hljs-number">1</span>] + dp[i][state][<span class="hljs-number">1</span>]) % mod;
            }
        }
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; e.length(); i++) {
            res = (res + dp[s.length()][i][<span class="hljs-number">0</span>]) % mod;
            res = (res + dp[s.length()][i][<span class="hljs-number">1</span>]) % mod;
        }
        <span class="hljs-keyword">return</span> (<span class="hljs-keyword">int</span>) res;
    }

    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getNextState</span><span class="hljs-params">(<span class="hljs-keyword">int</span> prevState, <span class="hljs-keyword">char</span> nextChar, String evil)</span> </span>{
        <span class="hljs-keyword">int</span> idx = prevState;
        <span class="hljs-keyword">while</span> (idx != -<span class="hljs-number">1</span> &amp;&amp; evil.charAt(idx) != nextChar) {
            idx = next[idx];
        }
        <span class="hljs-keyword">return</span> idx + <span class="hljs-number">1</span>;
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span>[] getNext(String e) {
        <span class="hljs-keyword">int</span> len = e.length();
        <span class="hljs-keyword">int</span>[] localNext = <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[len];
        localNext[<span class="hljs-number">0</span>] = -<span class="hljs-number">1</span>;
        <span class="hljs-keyword">int</span> last = -<span class="hljs-number">1</span>;
        <span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">while</span> (i &lt; len - <span class="hljs-number">1</span>) {
            <span class="hljs-keyword">if</span> (last == -<span class="hljs-number">1</span> || e.charAt(i) == e.charAt(last)) {
                i++;
                last++;
                localNext[i] = last;
            } <span class="hljs-keyword">else</span> {
                last = localNext[last];
            }
        }
        <span class="hljs-keyword">return</span> localNext;
    }
}
</code></pre>
<p><strong>Explain:</strong></p>
<p>nope.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>Time complexity : O(n).</li>
<li>Space complexity : O(n).</li>
</ul></article></main><footer><a href="https://github.com/curest0x1021/Leetcode-Solution" target="_blank"><img src="https://curest0x1021.github.io/Leetcode-Solution/static/img/github.png" alt="github"/></a></footer></body></html>