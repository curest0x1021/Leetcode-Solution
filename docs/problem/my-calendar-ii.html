<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta http-equiv="X-UA-Compatible" content="ie=edge"/><title>My Calendar II - LeetCode javascript solutions</title><link rel="shortcut icon" href="https://baffinlee.com/leetcode-javascript/static/img/favicon.png" type="image/png"/><link rel="stylesheet" href="https://baffinlee.com/leetcode-javascript/static/css/app.css"/></head><body><header><h1>731. My Calendar II</h1><div class="row"><div class="name">Difficulty:</div><div class="value"><a href="https://baffinlee.com/leetcode-javascript/difficulty/medium" class="tag">Medium</a></div></div><div class="row"><div class="name">Related Topics:</div><div class="value"><ul class="clearfix"><li><a href="https://baffinlee.com/leetcode-javascript/tag/binary-search">Binary Search</a></li><li><a href="https://baffinlee.com/leetcode-javascript/tag/design">Design</a></li><li><a href="https://baffinlee.com/leetcode-javascript/tag/segment-tree">Segment Tree</a></li><li><a href="https://baffinlee.com/leetcode-javascript/tag/ordered-set">Ordered Set</a></li></ul></div></div><div class="row"><div class="name">Similar Questions:</div><div class="value"><ul class="clearfix"><li><a href="https://baffinlee.com/leetcode-javascript/problem/my-calendar-i.html">My Calendar I</a></li><li><a href="https://baffinlee.com/leetcode-javascript/problem/my-calendar-iii.html">My Calendar III</a></li></ul></div></div></header><main><article class="markdown-body"><h2 id="problem">Problem</h2>
<p>You are implementing a program to use as your calendar. We can add a new event if adding the event will not cause a <strong>triple booking</strong>.</p>
<p>A <strong>triple booking</strong> happens when three events have some non-empty intersection (i.e., some moment is common to all the three events.).</p>
<p>The event can be represented as a pair of integers <code>start</code> and <code>end</code> that represents a booking on the half-open interval <code>[start, end)</code>, the range of real numbers <code>x</code> such that <code>start &lt;= x &lt; end</code>.</p>
<p>Implement the <code>MyCalendarTwo</code> class:</p>
<ul>
<li><p><code>MyCalendarTwo()</code> Initializes the calendar object.</p></li>
<li><p><code>boolean book(int start, int end)</code> Returns <code>true</code> if the event can be added to the calendar successfully without causing a <strong>triple booking</strong>. Otherwise, return <code>false</code> and do not add the event to the calendar.</p></li>
</ul>
<p>&nbsp;
<strong>Example 1:</strong></p>
<pre><code class="hljs">Input
[<span class="hljs-string">"MyCalendarTwo"</span>, <span class="hljs-string">"book"</span>, <span class="hljs-string">"book"</span>, <span class="hljs-string">"book"</span>, <span class="hljs-string">"book"</span>, <span class="hljs-string">"book"</span>, <span class="hljs-string">"book"</span>]
[[], [<span class="hljs-number">10</span>, <span class="hljs-number">20</span>], [<span class="hljs-number">50</span>, <span class="hljs-number">60</span>], [<span class="hljs-number">10</span>, <span class="hljs-number">40</span>], [<span class="hljs-number">5</span>, <span class="hljs-number">15</span>], [<span class="hljs-number">5</span>, <span class="hljs-number">10</span>], [<span class="hljs-number">25</span>, <span class="hljs-number">55</span>]]
Output
[<span class="hljs-literal">null</span>, <span class="hljs-literal">true</span>, <span class="hljs-literal">true</span>, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>, <span class="hljs-literal">true</span>]

Explanation
MyCalendarTwo myCalendarTwo = new MyCalendarTwo();
myCalendarTwo.book(<span class="hljs-number">10</span>, <span class="hljs-number">20</span>); <span class="hljs-comment">// return True, The event can be booked. </span>
myCalendarTwo.book(<span class="hljs-number">50</span>, <span class="hljs-number">60</span>); <span class="hljs-comment">// return True, The event can be booked. </span>
myCalendarTwo.book(<span class="hljs-number">10</span>, <span class="hljs-number">40</span>); <span class="hljs-comment">// return True, The event can be double booked. </span>
myCalendarTwo.book(<span class="hljs-number">5</span>, <span class="hljs-number">15</span>);  <span class="hljs-comment">// return False, The event cannot be booked, because it would result in a triple booking.</span>
myCalendarTwo.book(<span class="hljs-number">5</span>, <span class="hljs-number">10</span>); <span class="hljs-comment">// return True, The event can be booked, as it does not use time 10 which is already double booked.</span>
myCalendarTwo.book(<span class="hljs-number">25</span>, <span class="hljs-number">55</span>); <span class="hljs-comment">// return True, The event can be booked, as the time in [25, 40) will be double booked with the third event, the time [40, 50) will be single booked, and the time [50, 55) will be double booked with the second event.</span>
</code></pre>
<p>&nbsp;
<strong>Constraints:</strong></p>
<ul>
<li><p><code>0 &lt;= start &lt; end &lt;= 109</code></p></li>
<li><p>At most <code>1000</code> calls will be made to <code>book</code>.</p></li>
</ul>
<h2 id="solution-java">Solution (Java)</h2>
<pre><code class="hljs lang-java"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyCalendarTwo</span> </span>{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> TreeMap&lt;Integer, Integer&gt; map;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> TreeMap&lt;Integer, Integer&gt; overlap;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">MyCalendarTwo</span><span class="hljs-params">()</span> </span>{
        map = <span class="hljs-keyword">new</span> TreeMap&lt;&gt;();
        overlap = <span class="hljs-keyword">new</span> TreeMap&lt;&gt;();
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">book</span><span class="hljs-params">(<span class="hljs-keyword">int</span> start, <span class="hljs-keyword">int</span> end)</span> </span>{
        Integer ol = overlap.lowerKey(end);
        <span class="hljs-keyword">if</span> (ol == <span class="hljs-keyword">null</span> || overlap.get(ol) &lt;= start) {
            <span class="hljs-keyword">while</span> (<span class="hljs-keyword">true</span>) {
                Integer lower = map.lowerKey(end);
                <span class="hljs-keyword">if</span> (lower == <span class="hljs-keyword">null</span> || map.get(lower) &lt;= start) {
                    <span class="hljs-keyword">break</span>;
                }
                overlap.put(Math.max(start, lower), Math.min(end, map.get(lower)));
                start = Math.min(start, lower);
                end = Math.max(end, map.get(lower));
                map.remove(lower);
            }
            map.put(start, end);
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
    }
}

<span class="hljs-comment">/**
 * Your MyCalendarTwo object will be instantiated and called as such:
 * MyCalendarTwo obj = new MyCalendarTwo();
 * boolean param_1 = obj.book(start,end);
 */</span>
</code></pre>
<p><strong>Explain:</strong></p>
<p>nope.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>Time complexity : O(n).</li>
<li>Space complexity : O(n).</li>
</ul></article></main><footer><a href="https://github.com/BaffinLee/leetcode-javascript" target="_blank"><img src="https://baffinlee.com/leetcode-javascript/static/img/github.png" alt="github"/></a></footer></body></html>