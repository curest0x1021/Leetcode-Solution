<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta http-equiv="X-UA-Compatible" content="ie=edge"/><title>Find the Closest Palindrome - LeetCode javascript solutions</title><link rel="shortcut icon" href="https://curest0x1021.github.io/Leetcode-Solution/static/img/favicon.png" type="image/png"/><link rel="stylesheet" href="https://curest0x1021.github.io/Leetcode-Solution/static/css/app.css"/></head><body><header><h1>564. Find the Closest Palindrome</h1><div class="row"><div class="name">Difficulty:</div><div class="value"><a href="https://curest0x1021.github.io/Leetcode-Solution/difficulty/hard" class="tag">Hard</a></div></div><div class="row"><div class="name">Related Topics:</div><div class="value"><ul class="clearfix"><li><a href="https://curest0x1021.github.io/Leetcode-Solution/tag/math">Math</a></li><li><a href="https://curest0x1021.github.io/Leetcode-Solution/tag/string">String</a></li></ul></div></div><div class="row"><div class="name">Similar Questions:</div><div class="value"><ul class="clearfix"><li><a href="https://curest0x1021.github.io/Leetcode-Solution/problem/find-palindrome-with-fixed-length.html">Find Palindrome With Fixed Length</a></li><li><a href="https://curest0x1021.github.io/Leetcode-Solution/problem/next-palindrome-using-same-digits.html">Next Palindrome Using Same Digits</a></li></ul></div></div></header><main><article class="markdown-body"><h2 id="problem">Problem</h2>
<p>Given a string <code>n</code> representing an integer, return <strong>the closest integer (not including itself), which is a palindrome</strong>. If there is a tie, return <strong><em><em>the smaller one</em></strong></em>.</p>
<p>The closest is defined as the absolute difference minimized between two integers.</p>
<p>&nbsp;
<strong>Example 1:</strong></p>
<pre><code class="hljs"><span class="hljs-symbol">Input:</span> n = <span class="hljs-string">"123"</span>
<span class="hljs-symbol">Output:</span> <span class="hljs-string">"121"</span>
</code></pre>
<p><strong>Example 2:</strong></p>
<pre><code class="hljs"><span class="hljs-string">Input:</span> n = <span class="hljs-string">"1"</span>
<span class="hljs-string">Output:</span> <span class="hljs-string">"0"</span>
<span class="hljs-string">Explanation:</span> <span class="hljs-number">0</span> and <span class="hljs-number">2</span> are the closest palindromes but we <span class="hljs-keyword">return</span> the smallest which is <span class="hljs-number">0.</span>
</code></pre>
<p>&nbsp;
<strong>Constraints:</strong></p>
<ul>
<li><p><code>1 &lt;= n.length &lt;= 18</code></p></li>
<li><p><code>n</code> consists of only digits.</p></li>
<li><p><code>n</code> does not have leading zeros.</p></li>
<li><p><code>n</code> is representing an integer in the range <code>[1, 1018 - 1]</code>.</p></li>
</ul>
<h2 id="solution">Solution</h2>
<pre><code class="hljs lang-java"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">mirroring</span><span class="hljs-params">(String s)</span> </span>{
        String x = s.substring(<span class="hljs-number">0</span>, (s.length()) / <span class="hljs-number">2</span>);
        <span class="hljs-keyword">return</span> x + (s.length() % <span class="hljs-number">2</span> == <span class="hljs-number">1</span> ? s.charAt(s.length() / <span class="hljs-number">2</span>) : <span class="hljs-string">""</span>) + <span class="hljs-keyword">new</span> StringBuilder(x).reverse().toString();
    }
    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">nearestPalindromic</span><span class="hljs-params">(String n)</span> </span>{
        <span class="hljs-keyword">if</span> (n.equals(<span class="hljs-string">"1"</span>))
            <span class="hljs-keyword">return</span> <span class="hljs-string">"0"</span>;

        String a = mirroring(n);
        <span class="hljs-keyword">long</span> diff1 = Long.MAX_VALUE;
        diff1 = Math.abs(Long.parseLong(n) - Long.parseLong(a));
        <span class="hljs-keyword">if</span> (diff1 == <span class="hljs-number">0</span>)
            diff1 = Long.MAX_VALUE;

        StringBuilder s = <span class="hljs-keyword">new</span> StringBuilder(n);
        <span class="hljs-keyword">int</span> i = (s.length() - <span class="hljs-number">1</span>) / <span class="hljs-number">2</span>;
        <span class="hljs-keyword">while</span> (i &gt;= <span class="hljs-number">0</span> &amp;&amp; s.charAt(i) == <span class="hljs-string">'0'</span>) {
            s.replace(i, i + <span class="hljs-number">1</span>, <span class="hljs-string">"9"</span>);
            i--;
        }
        <span class="hljs-keyword">if</span> (i == <span class="hljs-number">0</span> &amp;&amp; s.charAt(i) == <span class="hljs-string">'1'</span>) {
            s.delete(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>);
            <span class="hljs-keyword">int</span> mid = (s.length() - <span class="hljs-number">1</span>) / <span class="hljs-number">2</span>;
            s.replace(mid, mid + <span class="hljs-number">1</span>, <span class="hljs-string">"9"</span>);
        } <span class="hljs-keyword">else</span>
            s.replace(i, i + <span class="hljs-number">1</span>, <span class="hljs-string">""</span> + (<span class="hljs-keyword">char</span>)(s.charAt(i) - <span class="hljs-number">1</span>));
        String b = mirroring(s.toString());
        <span class="hljs-keyword">long</span> diff2 = Math.abs(Long.parseLong(n) - Long.parseLong(b));


        s = <span class="hljs-keyword">new</span> StringBuilder(n);
        i = (s.length() - <span class="hljs-number">1</span>) / <span class="hljs-number">2</span>;
        <span class="hljs-keyword">while</span> (i &gt;= <span class="hljs-number">0</span> &amp;&amp; s.charAt(i) == <span class="hljs-string">'9'</span>) {
            s.replace(i, i + <span class="hljs-number">1</span>, <span class="hljs-string">"0"</span>);
            i--;
        }
        <span class="hljs-keyword">if</span> (i &lt; <span class="hljs-number">0</span>) {
            s.insert(<span class="hljs-number">0</span>, <span class="hljs-string">"1"</span>);
        } <span class="hljs-keyword">else</span>
            s.replace(i, i + <span class="hljs-number">1</span>, <span class="hljs-string">""</span> + (<span class="hljs-keyword">char</span>)(s.charAt(i) + <span class="hljs-number">1</span>));
        String c = mirroring(s.toString());
        <span class="hljs-keyword">long</span> diff3 = Math.abs(Long.parseLong(n) - Long.parseLong(c));

        <span class="hljs-keyword">if</span> (diff2 &lt;= diff1 &amp;&amp; diff2 &lt;= diff3)
            <span class="hljs-keyword">return</span> b;
        <span class="hljs-keyword">if</span> (diff1 &lt;= diff3 &amp;&amp; diff1 &lt;= diff2)
            <span class="hljs-keyword">return</span> a;
        <span class="hljs-keyword">else</span>
            <span class="hljs-keyword">return</span> c;
    }
}
</code></pre>
<p><strong>Explain:</strong></p>
<p>nope.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>Time complexity : O(n).</li>
<li>Space complexity : O(n).</li>
</ul></article></main><footer><a href="https://github.com/curest0x1021/Leetcode-Solution" target="_blank"><img src="https://curest0x1021.github.io/Leetcode-Solution/static/img/github.png" alt="github"/></a></footer></body></html>