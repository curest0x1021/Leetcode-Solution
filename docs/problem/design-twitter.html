<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta http-equiv="X-UA-Compatible" content="ie=edge"/><title>Design Twitter - LeetCode javascript solutions</title><link rel="shortcut icon" href="https://curest0x1021.github.io/Leetcode-Solution/static/img/favicon.png" type="image/png"/><link rel="stylesheet" href="https://curest0x1021.github.io/Leetcode-Solution/static/css/app.css"/></head><body><header><h1>355. Design Twitter</h1><div class="row"><div class="name">Difficulty:</div><div class="value"><a href="https://curest0x1021.github.io/Leetcode-Solution/difficulty/medium" class="tag">Medium</a></div></div><div class="row"><div class="name">Related Topics:</div><div class="value"><ul class="clearfix"><li><a href="https://curest0x1021.github.io/Leetcode-Solution/tag/hash-table">Hash Table</a></li><li><a href="https://curest0x1021.github.io/Leetcode-Solution/tag/linked-list">Linked List</a></li><li><a href="https://curest0x1021.github.io/Leetcode-Solution/tag/design">Design</a></li><li><a href="https://curest0x1021.github.io/Leetcode-Solution/tag/heap-priority-queue">Heap (Priority Queue)</a></li></ul></div></div><div class="row"><div class="name">Similar Questions:</div><div class="value"><ul class="clearfix"><li><a href="https://curest0x1021.github.io/Leetcode-Solution/problem/design-a-file-sharing-system.html">Design a File Sharing System</a></li></ul></div></div></header><main><article class="markdown-body"><h2 id="problem">Problem</h2>
<p>Design a simplified version of Twitter where users can post tweets, follow/unfollow another user, and is able to see the <code>10</code> most recent tweets in the user's news feed.</p>
<p>Implement the <code>Twitter</code> class:</p>
<ul>
<li><p><code>Twitter()</code> Initializes your twitter object.</p></li>
<li><p><code>void postTweet(int userId, int tweetId)</code> Composes a new tweet with ID <code>tweetId</code> by the user <code>userId</code>. Each call to this function will be made with a unique <code>tweetId</code>.</p></li>
<li><p><code>List&lt;Integer&gt; getNewsFeed(int userId)</code> Retrieves the <code>10</code> most recent tweet IDs in the user's news feed. Each item in the news feed must be posted by users who the user followed or by the user themself. Tweets must be <strong>ordered from most recent to least recent</strong>.</p></li>
<li><p><code>void follow(int followerId, int followeeId)</code> The user with ID <code>followerId</code> started following the user with ID <code>followeeId</code>.</p></li>
<li><p><code>void unfollow(int followerId, int followeeId)</code> The user with ID <code>followerId</code> started unfollowing the user with ID <code>followeeId</code>.</p></li>
</ul>
<p>&nbsp;
<strong>Example 1:</strong></p>
<pre><code class="hljs">Input
[<span class="hljs-string">"Twitter"</span>, <span class="hljs-string">"postTweet"</span>, <span class="hljs-string">"getNewsFeed"</span>, <span class="hljs-string">"follow"</span>, <span class="hljs-string">"postTweet"</span>, <span class="hljs-string">"getNewsFeed"</span>, <span class="hljs-string">"unfollow"</span>, <span class="hljs-string">"getNewsFeed"</span>]
[[], [<span class="hljs-number">1</span>, <span class="hljs-number">5</span>], [<span class="hljs-number">1</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>], [<span class="hljs-number">2</span>, <span class="hljs-number">6</span>], [<span class="hljs-number">1</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>], [<span class="hljs-number">1</span>]]
Output
[<span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>, [<span class="hljs-number">5</span>], <span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>, [<span class="hljs-number">6</span>, <span class="hljs-number">5</span>], <span class="hljs-literal">null</span>, [<span class="hljs-number">5</span>]]

Explanation
Twitter twitter = new Twitter();
twitter.postTweet(<span class="hljs-number">1</span>, <span class="hljs-number">5</span>); <span class="hljs-comment">// User 1 posts a new tweet (id = 5).</span>
twitter.getNewsFeed(<span class="hljs-number">1</span>);  <span class="hljs-comment">// User 1's news feed should return a list with 1 tweet id -&gt; [5]. return [5]</span>
twitter.follow(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>);    <span class="hljs-comment">// User 1 follows user 2.</span>
twitter.postTweet(<span class="hljs-number">2</span>, <span class="hljs-number">6</span>); <span class="hljs-comment">// User 2 posts a new tweet (id = 6).</span>
twitter.getNewsFeed(<span class="hljs-number">1</span>);  <span class="hljs-comment">// User 1's news feed should return a list with 2 tweet ids -&gt; [6, 5]. Tweet id 6 should precede tweet id 5 because it is posted after tweet id 5.</span>
twitter.unfollow(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>);  <span class="hljs-comment">// User 1 unfollows user 2.</span>
twitter.getNewsFeed(<span class="hljs-number">1</span>);  <span class="hljs-comment">// User 1's news feed should return a list with 1 tweet id -&gt; [5], since user 1 is no longer following user 2.</span>
</code></pre>
<p>&nbsp;
<strong>Constraints:</strong></p>
<ul>
<li><p><code>1 &lt;= userId, followerId, followeeId &lt;= 500</code></p></li>
<li><p><code>0 &lt;= tweetId &lt;= 104</code></p></li>
<li><p>All the tweets have <strong>unique</strong> IDs.</p></li>
<li><p>At most <code>3 * 104</code> calls will be made to <code>postTweet</code>, <code>getNewsFeed</code>, <code>follow</code>, and <code>unfollow</code>.</p></li>
</ul>
<h2 id="solution">Solution</h2>
<pre><code class="hljs lang-java"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Twitter</span> </span>{
    <span class="hljs-comment">// userId --&gt; user followers</span>
    <span class="hljs-keyword">private</span> Map&lt;Integer, HashSet&lt;Integer&gt;&gt; twitterData;
    <span class="hljs-comment">// head of linked list that stores all the tweets</span>
    <span class="hljs-keyword">private</span> Tweet head;

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Tweet</span> </span>{
        <span class="hljs-keyword">int</span> userId;
        <span class="hljs-keyword">int</span> tweetId;
        Tweet next;

        Tweet(<span class="hljs-keyword">int</span> uId, <span class="hljs-keyword">int</span> tId) {
            userId = uId;
            tweetId = tId;
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Twitter</span><span class="hljs-params">()</span> </span>{
        head = <span class="hljs-keyword">new</span> Tweet(-<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>);
        twitterData = <span class="hljs-keyword">new</span> HashMap&lt;&gt;();
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">postTweet</span><span class="hljs-params">(<span class="hljs-keyword">int</span> userId, <span class="hljs-keyword">int</span> tweetId)</span> </span>{
        checkNewUser(userId);
        Tweet t = <span class="hljs-keyword">new</span> Tweet(userId, tweetId);
        Tweet next = head.next;
        head.next = t;
        t.next = next;
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;Integer&gt; <span class="hljs-title">getNewsFeed</span><span class="hljs-params">(<span class="hljs-keyword">int</span> userId)</span> </span>{
        checkNewUser(userId);
        List&lt;Integer&gt; res = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();
        HashSet&lt;Integer&gt; followers = twitterData.get(userId);
        Tweet t = head.next;
        <span class="hljs-keyword">while</span> (t != <span class="hljs-keyword">null</span> &amp;&amp; res.size() &lt; <span class="hljs-number">10</span>) {
            <span class="hljs-keyword">if</span> (followers.contains(t.userId)) {
                res.add(t.tweetId);
            }
            t = t.next;
        }
        <span class="hljs-keyword">return</span> res;
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">follow</span><span class="hljs-params">(<span class="hljs-keyword">int</span> followerId, <span class="hljs-keyword">int</span> followeeId)</span> </span>{
        checkNewUser(followeeId);
        checkNewUser(followerId);
        twitterData.get(followerId).add(followeeId);
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">unfollow</span><span class="hljs-params">(<span class="hljs-keyword">int</span> followerId, <span class="hljs-keyword">int</span> followeeId)</span> </span>{
        checkNewUser(followeeId);
        <span class="hljs-comment">// cannot unfollower yourself</span>
        <span class="hljs-keyword">if</span> (followerId == followeeId) {
            <span class="hljs-keyword">return</span>;
        }
        checkNewUser(followerId);
        twitterData.get(followerId).remove(followeeId);
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">checkNewUser</span><span class="hljs-params">(<span class="hljs-keyword">int</span> userId)</span> </span>{
        <span class="hljs-keyword">if</span> (twitterData.containsKey(userId)) {
            <span class="hljs-keyword">return</span>;
        }
        twitterData.put(userId, <span class="hljs-keyword">new</span> HashSet&lt;&gt;());
        <span class="hljs-comment">// follow  yourself</span>
        twitterData.get(userId).add(userId);
    }
}

<span class="hljs-comment">/**
 * Your Twitter object will be instantiated and called as such:
 * Twitter obj = new Twitter();
 * obj.postTweet(userId,tweetId);
 * List&lt;Integer&gt; param_2 = obj.getNewsFeed(userId);
 * obj.follow(followerId,followeeId);
 * obj.unfollow(followerId,followeeId);
 */</span>
</code></pre>
<p><strong>Explain:</strong></p>
<p>nope.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>Time complexity : O(n).</li>
<li>Space complexity : O(n).</li>
</ul></article></main><footer><a href="https://github.com/curest0x1021/Leetcode-Solution" target="_blank"><img src="https://curest0x1021.github.io/Leetcode-Solution/static/img/github.png" alt="github"/></a></footer></body></html>