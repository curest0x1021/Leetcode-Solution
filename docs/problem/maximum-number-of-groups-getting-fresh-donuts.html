<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta http-equiv="X-UA-Compatible" content="ie=edge"/><title>Maximum Number of Groups Getting Fresh Donuts - LeetCode javascript solutions</title><link rel="shortcut icon" href="https://curest0x1021.github.io/Leetcode-Solution/static/img/favicon.png" type="image/png"/><link rel="stylesheet" href="https://curest0x1021.github.io/Leetcode-Solution/static/css/app.css"/></head><body><header><h1>1815. Maximum Number of Groups Getting Fresh Donuts</h1><div class="row"><div class="name">Difficulty:</div><div class="value"><a href="https://curest0x1021.github.io/Leetcode-Solution/difficulty/hard" class="tag">Hard</a></div></div><div class="row"><div class="name">Related Topics:</div><div class="value"><ul class="clearfix"><li><a href="https://curest0x1021.github.io/Leetcode-Solution/tag/array">Array</a></li><li><a href="https://curest0x1021.github.io/Leetcode-Solution/tag/dynamic-programming">Dynamic Programming</a></li><li><a href="https://curest0x1021.github.io/Leetcode-Solution/tag/bit-manipulation">Bit Manipulation</a></li><li><a href="https://curest0x1021.github.io/Leetcode-Solution/tag/memoization">Memoization</a></li><li><a href="https://curest0x1021.github.io/Leetcode-Solution/tag/bitmask">Bitmask</a></li></ul></div></div><div class="row"><div class="name">Similar Questions:</div><div class="value"><ul class="clearfix"></ul></div></div></header><main><article class="markdown-body"><h2 id="problem">Problem</h2>
<p>There is a donuts shop that bakes donuts in batches of <code>batchSize</code>. They have a rule where they must serve <strong>all</strong> of the donuts of a batch before serving any donuts of the next batch. You are given an integer <code>batchSize</code> and an integer array <code>groups</code>, where <code>groups[i]</code> denotes that there is a group of <code>groups[i]</code> customers that will visit the shop. Each customer will get exactly one donut.</p>
<p>When a group visits the shop, all customers of the group must be served before serving any of the following groups. A group will be happy if they all get fresh donuts. That is, the first customer of the group does not receive a donut that was left over from the previous group.</p>
<p>You can freely rearrange the ordering of the groups. Return **the *<em>maximum</em>* possible number of happy groups after rearranging the groups.**</p>
<p>&nbsp;
<strong>Example 1:</strong></p>
<pre><code class="hljs">Input: batchSize = <span class="hljs-number">3</span>, groups = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>]
Output: <span class="hljs-number">4</span>
Explanation: You can arrange the groups as [<span class="hljs-number">6</span>,<span class="hljs-number">2</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>]. Then the <span class="hljs-number">1</span>st, <span class="hljs-number">2</span>nd, <span class="hljs-number">4</span>th, <span class="hljs-keyword">and</span> <span class="hljs-number">6</span>th groups will be happy.
</code></pre>
<p><strong>Example 2:</strong></p>
<pre><code class="hljs">Input: batchSize = <span class="hljs-number">4</span>, groups = [<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">2</span>,<span class="hljs-number">5</span>,<span class="hljs-number">2</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>,<span class="hljs-number">6</span>]
Output: <span class="hljs-number">4</span>
</code></pre>
<p>&nbsp;
<strong>Constraints:</strong></p>
<ul>
<li><p><code>1 &lt;= batchSize &lt;= 9</code></p></li>
<li><p><code>1 &lt;= groups.length &lt;= 30</code></p></li>
<li><p><code>1 &lt;= groups[i] &lt;= 109</code></p></li>
</ul>
<h2 id="solution">Solution</h2>
<pre><code class="hljs lang-java"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span> </span>{
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">maxHappyGroups</span><span class="hljs-params">(<span class="hljs-keyword">int</span> batchSize, <span class="hljs-keyword">int</span>[] groups)</span> </span>{
    <span class="hljs-keyword">int</span> happy = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">int</span>[] freq = <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[batchSize];

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> g : groups) {
      g %= batchSize;
      <span class="hljs-keyword">if</span> (g == <span class="hljs-number">0</span>) {
        ++happy;
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (freq[batchSize - g] &gt; <span class="hljs-number">0</span>) {
        --freq[batchSize - g];
        ++happy;
      } <span class="hljs-keyword">else</span> {
        ++freq[g];
      }
    }

    <span class="hljs-keyword">return</span> happy + dp(freq, <span class="hljs-number">0</span>, batchSize);
  }

  <span class="hljs-keyword">private</span> Map&lt;String, Integer&gt; memo = <span class="hljs-keyword">new</span> HashMap&lt;&gt;();

  <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> <span class="hljs-title">dp</span><span class="hljs-params">(<span class="hljs-keyword">int</span>[] freq, <span class="hljs-keyword">int</span> r, <span class="hljs-keyword">int</span> batchSize)</span> </span>{
    <span class="hljs-keyword">final</span> String hashed = hash(freq);
    <span class="hljs-keyword">if</span> (memo.containsKey(hashed))
      <span class="hljs-keyword">return</span> memo.get(hashed);

    <span class="hljs-keyword">int</span> ans = <span class="hljs-number">0</span>;

    <span class="hljs-keyword">if</span> (Arrays.stream(freq).anyMatch(f -&gt; f != <span class="hljs-number">0</span>)) {
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; freq.length; ++i)
        <span class="hljs-keyword">if</span> (freq[i] &gt; <span class="hljs-number">0</span>) {
          <span class="hljs-keyword">int</span>[] newFreq = freq.clone();
          --newFreq[i];
          ans = Math.max(ans, dp(newFreq, (r + i) % batchSize, batchSize));
        }
      <span class="hljs-keyword">if</span> (r == <span class="hljs-number">0</span>)
        ++ans;
    }

    memo.put(hash(freq), ans);
    <span class="hljs-keyword">return</span> ans;
  }

  <span class="hljs-function"><span class="hljs-keyword">private</span> String <span class="hljs-title">hash</span><span class="hljs-params">(<span class="hljs-keyword">int</span>[] freq)</span> </span>{
    StringBuilder sb = <span class="hljs-keyword">new</span> StringBuilder();
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> f : freq)
      sb.append(<span class="hljs-string">"#"</span>).append(f);
    <span class="hljs-keyword">return</span> sb.toString();
  }
}
</code></pre>
<p><strong>Explain:</strong></p>
<p>nope.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>Time complexity : O(n).</li>
<li>Space complexity : O(n).</li>
</ul></article></main><footer><a href="https://github.com/curest0x1021/Leetcode-Solution" target="_blank"><img src="https://curest0x1021.github.io/Leetcode-Solution/static/img/github.png" alt="github"/></a></footer></body></html>