<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta http-equiv="X-UA-Compatible" content="ie=edge"/><title>Remove Duplicate Letters - LeetCode javascript solutions</title><link rel="shortcut icon" href="https://curest0x1021.github.io/Leetcode-Solution/static/img/favicon.png" type="image/png"/><link rel="stylesheet" href="https://curest0x1021.github.io/Leetcode-Solution/static/css/app.css"/></head><body><header><h1>316. Remove Duplicate Letters</h1><div class="row"><div class="name">Difficulty:</div><div class="value"><a href="https://curest0x1021.github.io/Leetcode-Solution/difficulty/hard" class="tag">Hard</a></div></div><div class="row"><div class="name">Related Topics:</div><div class="value"><ul class="clearfix"><li><a href="https://curest0x1021.github.io/Leetcode-Solution/tag/stack">Stack</a></li><li><a href="https://curest0x1021.github.io/Leetcode-Solution/tag/greedy">Greedy</a></li></ul></div></div><div class="row"><div class="name">Similar Questions:</div><div class="value"><ul class="clearfix"></ul></div></div></header><main><article class="markdown-body"><h2 id="problem">Problem</h2>
<p>Given a string which contains only lowercase letters, remove duplicate letters so that every letter appear once and only once. You must make sure your result is the smallest in lexicographical order among all possible results.</p>
<p><strong>Example 1:</strong></p>
<pre><code class="hljs"><span class="hljs-symbol">Input:</span> <span class="hljs-string">"bcabc"</span>
<span class="hljs-symbol">Output:</span> <span class="hljs-string">"abc"</span>
</code></pre>
<p><strong>Example 2:</strong></p>
<pre><code class="hljs"><span class="hljs-symbol">Input:</span> <span class="hljs-string">"cbacdcbc"</span>
<span class="hljs-symbol">Output:</span> <span class="hljs-string">"acdb"</span>
</code></pre>
<h2 id="solution-javascript">Solution (Javascript)</h2>
<pre><code class="hljs lang-javascript"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">{string}</span> <span class="hljs-variable">s</span></span>
 * <span class="hljs-doctag">@return <span class="hljs-type">{string}</span></span>
 */</span>
<span class="hljs-keyword">var</span> removeDuplicateLetters = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">s</span>) </span>{
  <span class="hljs-keyword">var</span> count = {};
  <span class="hljs-keyword">var</span> len = s.length;
  <span class="hljs-keyword">var</span> index = <span class="hljs-number">0</span>;

  <span class="hljs-keyword">if</span> (!len) <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>;

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; len; i++) {
    <span class="hljs-keyword">if</span> (count[s[i]] === <span class="hljs-literal">undefined</span>) count[s[i]] = <span class="hljs-number">0</span>;
    count[s[i]]++;
  }

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> j = <span class="hljs-number">0</span>; j &lt; len; j++) {
    <span class="hljs-keyword">if</span> (s[j] &lt; s[index]) index = j;
    <span class="hljs-keyword">if</span> (--count[s[j]] === <span class="hljs-number">0</span>) <span class="hljs-keyword">break</span>;
  }

  <span class="hljs-keyword">var</span> firstChar = s[index];
  <span class="hljs-keyword">var</span> restString = s.substr(index + <span class="hljs-number">1</span>);

  restString = restString.replace(<span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(firstChar, <span class="hljs-string">'g'</span>), <span class="hljs-string">''</span>);

  <span class="hljs-keyword">return</span> firstChar + removeDuplicateLetters(restString);
};
</code></pre>
<h2 id="solution-java">Solution (Java)</h2>
<pre><code class="hljs lang-java"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">removeDuplicateLetters</span><span class="hljs-params">(String s)</span> </span>{
        <span class="hljs-keyword">int</span>[] charCount = <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[<span class="hljs-number">26</span>];
        <span class="hljs-keyword">boolean</span>[] charAdded = <span class="hljs-keyword">new</span> <span class="hljs-keyword">boolean</span>[<span class="hljs-number">26</span>];
        <span class="hljs-comment">// Build the char count array</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">char</span> c : s.toCharArray()) {
            charCount[c - <span class="hljs-string">'a'</span>] += <span class="hljs-number">1</span>;
        }
        StringBuilder sb = <span class="hljs-keyword">new</span> StringBuilder();
        <span class="hljs-comment">// i = index of the input string</span>
        <span class="hljs-comment">// j = index of the output stringBuilder</span>
        <span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; s.length(); i++) {
            <span class="hljs-keyword">char</span> curr = s.charAt(i);
            <span class="hljs-comment">// If the curr char is NOT already added in the final string</span>
            <span class="hljs-keyword">if</span> (!charAdded[curr - <span class="hljs-string">'a'</span>]) {
                <span class="hljs-comment">// If the prev char in final string is lexicographically greater than curr char of</span>
                <span class="hljs-comment">// input string</span>
                <span class="hljs-comment">// And there are more characters in charCount array then we can remove this prev</span>
                <span class="hljs-comment">// char from final string</span>
                <span class="hljs-comment">// Do this check iteratively until all characters are removed from the final string</span>
                <span class="hljs-comment">// or prev char &lt; curr char</span>
                <span class="hljs-keyword">while</span> (j &gt; <span class="hljs-number">0</span> &amp;&amp; sb.charAt(j - <span class="hljs-number">1</span>) &gt; curr &amp;&amp; charCount[sb.charAt(j - <span class="hljs-number">1</span>) - <span class="hljs-string">'a'</span>] &gt; <span class="hljs-number">0</span>) {
                    charAdded[sb.charAt(j - <span class="hljs-number">1</span>) - <span class="hljs-string">'a'</span>] = <span class="hljs-keyword">false</span>;
                    sb.deleteCharAt(j - <span class="hljs-number">1</span>);
                    j--;
                }
                <span class="hljs-comment">// Add the curr char in final string and mark that character as added in the string</span>
                sb.append(curr);
                charAdded[curr - <span class="hljs-string">'a'</span>] = <span class="hljs-keyword">true</span>;
                j++;
            }
            <span class="hljs-comment">// Reduce the count of the current character from the charCount array</span>
            charCount[curr - <span class="hljs-string">'a'</span>] -= <span class="hljs-number">1</span>;
        }
        <span class="hljs-keyword">return</span> sb.toString();
    }
}
</code></pre>
<p><strong>Explain:</strong></p>
<p>贪心，每次找到排第一的字符，再递归。</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>Time complexity : O(n).</li>
<li>Space complexity : O(n).</li>
</ul></article></main><footer><a href="https://github.com/curest0x1021/Leetcode-Solution" target="_blank"><img src="https://curest0x1021.github.io/Leetcode-Solution/static/img/github.png" alt="github"/></a></footer></body></html>